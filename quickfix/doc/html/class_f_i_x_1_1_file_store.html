<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FIX::FileStore class Reference</title>
<link href="quickfix.css" rel="stylesheet" type="text/css">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td><img src="images/outsideTopLeft.gif"></td>
   <td width="100%" class="outsideTop">&nbsp;</td>
   <td><img src="images/outsideTopRight.gif"></td>
  </tr>
  <tr>
   <td class="outsideLeft">&nbsp;</td>
   <td>
	<img src="images/QuickFIX.jpg" align="middle" border=0>
	&nbsp;&nbsp;
	<a href="index.html">Index</a>&nbsp;
	<a href="files.html">Source Files</a>&nbsp;
	<a href="annotated.html">Annotated Class List</a>&nbsp;
	<a href="classes.html">Alphabetical Class List</a>&nbsp;
	<a href="hierarchy.html">Class Hierarchy</a>&nbsp;
	<a href="inherits.html">Graphical Class Hierarchy</a>&nbsp;
   </td>
   <td class="outsideRight">&nbsp;</td>
  </tr>
  <tr>
   <td><img src="images/outsideBottomLeft.gif"></td>
   <td width=100% class="outsideBottom">&nbsp;</td>
   <td><img src="images/outsideBottomRight.gif"></td>
  </tr>
</table>
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.3.6-20040222 -->
<h1>FIX::FileStore Class Reference</h1>File based implementation of <a class="el" href="class_f_i_x_1_1_message_store.html">MessageStore</a>.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_file_store_8h-source.html">FileStore.h</a>&gt;</code>
<p>
Inheritance diagram for FIX::FileStore:<p><center><img src="class_f_i_x_1_1_file_store__inherit__graph.png" border="0" usemap="#_f_i_x_1_1_file_store__inherit__map" alt="Inheritance graph"></center>
<map name="_f_i_x_1_1_file_store__inherit__map">
<area href="class_f_i_x_1_1_message_store.html" shape="rect" coords="6,18,124,42" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for FIX::FileStore:<p><center><img src="class_f_i_x_1_1_file_store__coll__graph.png" border="0" usemap="#_f_i_x_1_1_file_store__coll__map" alt="Collaboration graph"></center>
<map name="_f_i_x_1_1_file_store__coll__map">
<area href="class_f_i_x_1_1_message_store.html" shape="rect" coords="6,96,124,120" alt="">
<area href="class_f_i_x_1_1_memory_store.html" shape="rect" coords="102,186,214,210" alt="">
<area href="class_f_i_x_1_1_utc_time_stamp.html" shape="rect" coords="148,96,267,120" alt="">
<area href="struct_f_i_x_1_1_date_time.html" shape="rect" coords="163,18,251,42" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="class_f_i_x_1_1_file_store-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a0">FileStore</a> (std::string, const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;s)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a1">~FileStore</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a2">set</a> (int, const std::string &amp;)  throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a3">get</a> (int, int, std::vector&lt; std::string &gt; &amp;) const   throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a4">getNextSenderMsgSeqNum</a> () const   throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a5">getNextTargetMsgSeqNum</a> () const   throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a6">setNextSenderMsgSeqNum</a> (int value)  throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a7">setNextTargetMsgSeqNum</a> (int value)  throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a8">incrNextSenderMsgSeqNum</a> ()  throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a9">incrNextTargetMsgSeqNum</a> ()  throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_f_i_x_1_1_utc_time_stamp.html">UtcTimeStamp</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a10">getCreationTime</a> () const   throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a11">reset</a> ()  throw ( IOException )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#a12">refresh</a> ()  throw ( IOException )</td></tr>

<tr><td colspan=2><br><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef std::pair&lt; int, int &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#y0">OffsetSize</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef std::map&lt; int, <a class="el" href="class_f_i_x_1_1_file_store.html#y0">OffsetSize</a> &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#y1">NumToOffset</a></td></tr>

<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#d0">open</a> (bool deleteFile)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#d1">populateCache</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#d2">readFromFile</a> (int offset, int size, std::string &amp;msg)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#d3">setSeqNum</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#d4">setSession</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#d5">get</a> (int, std::string &amp;) const   throw ( IOException )</td></tr>

<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_f_i_x_1_1_memory_store.html">MemoryStore</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_f_i_x_1_1_file_store.html#y1">NumToOffset</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r1">m_offsets</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>std::string&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r2">m_msgFileName</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>std::string&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r3">m_headerFileName</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>std::string&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r4">m_seqNumsFileName</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>std::string&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r5">m_sessionFileName</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>FILE *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r6">m_msgFile</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>FILE *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r7">m_headerFile</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>FILE *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r8">m_seqNumsFile</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>FILE *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_file_store.html#r9">m_sessionFile</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
File based implementation of <a class="el" href="class_f_i_x_1_1_message_store.html">MessageStore</a>. 
<p>
Four files are created by this implementation. One for storing outgoing messages, one for indexing message locations, one for storing sequence numbers, and one for storing the session creation time.<p>
The formats of the files are:<br>
 &nbsp;&nbsp; [path]+[BeginString]-[SenderCompID]-[TargetCompID].body<br>
 &nbsp;&nbsp; [path]+[BeginString]-[SenderCompID]-[TargetCompID].header<br>
 &nbsp;&nbsp; [path]+[BeginString]-[SenderCompID]-[TargetCompID].seqnums<br>
 &nbsp;&nbsp; [path]+[BeginString]-[SenderCompID]-[TargetCompID].session<br>
<p>
The messages file is a pure stream of FIX messages.<br>
<br>
 The sequence number file is in the format of<br>
 &nbsp;&nbsp; [SenderMsgSeqNum] : [TargetMsgSeqNum]<br>
<br>
 The session file is a UTC timestamp in the format of<br>
 &nbsp;&nbsp; YYYYMMDD-HH:MM:SS 
<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00081">81</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="y1" doxytag="FIX::FileStore::NumToOffset" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef std::map&lt; int, <a class="el" href="class_f_i_x_1_1_file_store.html#y0">OffsetSize</a> &gt; <a class="el" href="class_f_i_x_1_1_file_store.html#y1">FIX::FileStore::NumToOffset</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00104">104</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="y0" doxytag="FIX::FileStore::OffsetSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef std::pair&lt; int, int &gt; <a class="el" href="class_f_i_x_1_1_file_store.html#y0">FIX::FileStore::OffsetSize</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00103">103</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00331">get()</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="FIX::FileStore::FileStore" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FIX::FileStore::FileStore </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::string&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00035">35</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_utility_8cpp-source.html#l00568">FIX::file_appendpath()</a>, <a class="el" href="_utility_8cpp-source.html#l00529">FIX::file_mkdir()</a>, <a class="el" href="_session_i_d_8h-source.html#l00053">FIX::SessionID::getBeginString()</a>, <a class="el" href="_session_i_d_8h-source.html#l00055">FIX::SessionID::getSenderCompID()</a>, <a class="el" href="_session_i_d_8h-source.html#l00059">FIX::SessionID::getSessionQualifier()</a>, <a class="el" href="_session_i_d_8h-source.html#l00057">FIX::SessionID::getTargetCompID()</a>, <a class="el" href="_file_store_8h-source.html#l00118">m_headerFileName</a>, <a class="el" href="_file_store_8h-source.html#l00117">m_msgFileName</a>, <a class="el" href="_file_store_8h-source.html#l00119">m_seqNumsFileName</a>, <a class="el" href="_file_store_8h-source.html#l00120">m_sessionFileName</a>, and <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>.
<p>
<div class="fragment"><pre>00036 : <a class="code" href="class_f_i_x_1_1_file_store.html#r6">m_msgFile</a>( 0 ), <a class="code" href="class_f_i_x_1_1_file_store.html#r7">m_headerFile</a>( 0 ), <a class="code" href="class_f_i_x_1_1_file_store.html#r8">m_seqNumsFile</a>( 0 ), <a class="code" href="class_f_i_x_1_1_file_store.html#r9">m_sessionFile</a>( 0 )
00037 {
00038   <a class="code" href="namespace_f_i_x.html#a2946">file_mkdir</a>( path.c_str() );
00039 
00040   <span class="keywordflow">if</span> ( path.empty() ) path = <span class="stringliteral">"."</span>;
00041   <span class="keyword">const</span> std::string&amp; begin =
00042     s.getBeginString().getString();
00043   <span class="keyword">const</span> std::string&amp; sender =
00044     s.getSenderCompID().getString();
00045   <span class="keyword">const</span> std::string&amp; target =
00046     s.getTargetCompID().getString();
00047   <span class="keyword">const</span> std::string&amp; qualifier =
00048     s.getSessionQualifier();
00049 
00050   std::string sessionid = begin + <span class="stringliteral">"-"</span> + sender + <span class="stringliteral">"-"</span> + target;
00051   <span class="keywordflow">if</span>( qualifier.size() )
00052     sessionid += <span class="stringliteral">"-"</span> + qualifier;
00053 
00054   std::string prefix
00055     = <a class="code" href="namespace_f_i_x.html#a2949">file_appendpath</a>(path, sessionid + <span class="stringliteral">"."</span>);
00056 
00057   <a class="code" href="class_f_i_x_1_1_file_store.html#r2">m_msgFileName</a> = prefix + <span class="stringliteral">"body"</span>;
00058   <a class="code" href="class_f_i_x_1_1_file_store.html#r3">m_headerFileName</a> = prefix + <span class="stringliteral">"header"</span>;
00059   <a class="code" href="class_f_i_x_1_1_file_store.html#r4">m_seqNumsFileName</a> = prefix + <span class="stringliteral">"seqnums"</span>;
00060   <a class="code" href="class_f_i_x_1_1_file_store.html#r5">m_sessionFileName</a> = prefix + <span class="stringliteral">"session"</span>;
00061 
00062   <span class="keywordflow">try</span>
00063   {
00064     <a class="code" href="class_f_i_x_1_1_file_store.html#d0">open</a>( <span class="keyword">false</span> );
00065   }
00066   <span class="keywordflow">catch</span> ( IOException &amp; e )
00067   {
00068     <span class="keywordflow">throw</span> ConfigError( e.what() );
00069   }
00070 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="FIX::FileStore::~FileStore" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FIX::FileStore::~<a class="el" href="class_f_i_x_1_1_file_store.html">FileStore</a> </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00072">72</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_file_store_8h-source.html#l00123">m_headerFile</a>, <a class="el" href="_file_store_8h-source.html#l00122">m_msgFile</a>, <a class="el" href="_file_store_8h-source.html#l00124">m_seqNumsFile</a>, and <a class="el" href="_file_store_8h-source.html#l00125">m_sessionFile</a>.
<p>
<div class="fragment"><pre>00073 {
00074   fclose( m_msgFile );
00075   fclose( m_headerFile );
00076   fclose( m_seqNumsFile );
00077   fclose( m_sessionFile );
00078 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="d5" doxytag="FIX::FileStore::get" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool FIX::FileStore::get </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::string &amp;&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00331">331</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_file_store_8h-source.html#l00103">OffsetSize</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00333 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::get)
00334 
00335   NumToOffset::const_iterator find = <a class="code" href="class_f_i_x_1_1_file_store.html#r1">m_offsets</a>.find( msgSeqNum );
00336   <span class="keywordflow">if</span> ( find == <a class="code" href="class_f_i_x_1_1_file_store.html#r1">m_offsets</a>.end() ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00337   <span class="keyword">const</span> <a class="code" href="class_f_i_x_1_1_file_store.html#y0">OffsetSize</a>&amp; offset = find-&gt;second;
00338   <span class="keywordflow">if</span> ( fseek( m_msgFile, offset.first, SEEK_SET ) ) 
00339     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to seek in file "</span> + m_msgFileName );
00340   <span class="keywordtype">char</span>* buffer = <span class="keyword">new</span> <span class="keywordtype">char</span>[ offset.second + 1 ];
00341   fread( buffer, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span> ), offset.second, m_msgFile );
00342   <span class="keywordflow">if</span> ( ferror( m_msgFile ) ) 
00343     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to read from file "</span> + m_msgFileName );
00344   buffer[ offset.second ] = 0;
00345   msg = buffer;
00346   <span class="keyword">delete</span> [] buffer;
00347   <span class="keywordflow">return</span> <span class="keyword">true</span>;
00348 
00349   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00350 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="FIX::FileStore::get" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::get </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::vector&lt; std::string &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a2">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00222">222</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00225 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::get)
00226 
00227   result.clear();
00228   std::string msg;
00229   <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = begin; i &lt;= end; ++i )
00230   {
00231     <span class="keywordflow">if</span> ( <a class="code" href="class_f_i_x_1_1_file_store.html#a3">get</a>( i, msg ) )
00232       result.push_back( msg );
00233   }
00234 
00235   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00236 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="FIX::FileStore::getCreationTime" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_f_i_x_1_1_utc_time_stamp.html">UtcTimeStamp</a> FIX::FileStore::getCreationTime </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a9">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00278">278</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00279 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::getCreationTime)
00280   <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.getCreationTime();
00281   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00282 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="FIX::FileStore::getNextSenderMsgSeqNum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int FIX::FileStore::getNextSenderMsgSeqNum </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a3">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00238">238</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00303">setSeqNum()</a>.
<p>
<div class="fragment"><pre>00239 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::getNextSenderMsgSeqNum)
00240   <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.getNextSenderMsgSeqNum();
00241   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00242 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="FIX::FileStore::getNextTargetMsgSeqNum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int FIX::FileStore::getNextTargetMsgSeqNum </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a4">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00244">244</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00303">setSeqNum()</a>.
<p>
<div class="fragment"><pre>00245 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::getNextTargetMsgSeqNum)
00246   <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.getNextTargetMsgSeqNum();
00247   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00248 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="FIX::FileStore::incrNextSenderMsgSeqNum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::incrNextSenderMsgSeqNum </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a7">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00264">264</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00265 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::incrNextSenderMsgSeqNum)
00266   <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.incrNextSenderMsgSeqNum();
00267   <a class="code" href="class_f_i_x_1_1_file_store.html#d3">setSeqNum</a>();
00268   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00269 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="FIX::FileStore::incrNextTargetMsgSeqNum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::incrNextTargetMsgSeqNum </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a8">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00271">271</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00272 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::incrNextTargetMsgSeqNum)
00273   <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.incrNextTargetMsgSeqNum();
00274   <a class="code" href="class_f_i_x_1_1_file_store.html#d3">setSeqNum</a>();
00275   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00276 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="FIX::FileStore::open" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::open </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>deleteFile</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00080">80</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_utility_8cpp-source.html#l00542">FIX::file_fopen()</a>, <a class="el" href="_utility_8cpp-source.html#l00556">FIX::file_unlink()</a>, <a class="el" href="_file_store_8cpp-source.html#l00238">getNextSenderMsgSeqNum()</a>, <a class="el" href="_file_store_8cpp-source.html#l00244">getNextTargetMsgSeqNum()</a>, <a class="el" href="_file_store_8h-source.html#l00123">m_headerFile</a>, <a class="el" href="_file_store_8h-source.html#l00118">m_headerFileName</a>, <a class="el" href="_file_store_8h-source.html#l00122">m_msgFile</a>, <a class="el" href="_file_store_8h-source.html#l00117">m_msgFileName</a>, <a class="el" href="_file_store_8h-source.html#l00124">m_seqNumsFile</a>, <a class="el" href="_file_store_8h-source.html#l00119">m_seqNumsFileName</a>, <a class="el" href="_file_store_8h-source.html#l00125">m_sessionFile</a>, <a class="el" href="_file_store_8h-source.html#l00120">m_sessionFileName</a>, <a class="el" href="_file_store_8cpp-source.html#l00125">populateCache()</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_file_store_8cpp-source.html#l00250">setNextSenderMsgSeqNum()</a>, <a class="el" href="_file_store_8cpp-source.html#l00257">setNextTargetMsgSeqNum()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00317">setSession()</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00035">FileStore()</a>.
<p>
<div class="fragment"><pre>00081 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::open)
00082 
00083   <span class="keywordflow">if</span> ( <a class="code" href="class_f_i_x_1_1_file_store.html#r6">m_msgFile</a> ) fclose( m_msgFile );
00084   <span class="keywordflow">if</span> ( <a class="code" href="class_f_i_x_1_1_file_store.html#r7">m_headerFile</a> ) fclose( m_headerFile );
00085   <span class="keywordflow">if</span> ( <a class="code" href="class_f_i_x_1_1_file_store.html#r8">m_seqNumsFile</a> ) fclose( m_seqNumsFile );
00086   <span class="keywordflow">if</span> ( <a class="code" href="class_f_i_x_1_1_file_store.html#r9">m_sessionFile</a> ) fclose( m_sessionFile );
00087 
00088   <span class="keywordflow">if</span> ( deleteFile )
00089   {
00090     <a class="code" href="namespace_f_i_x.html#a2948">file_unlink</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r2">m_msgFileName</a>.c_str() );
00091     <a class="code" href="namespace_f_i_x.html#a2948">file_unlink</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r3">m_headerFileName</a>.c_str() );
00092     <a class="code" href="namespace_f_i_x.html#a2948">file_unlink</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r4">m_seqNumsFileName</a>.c_str() );
00093     <a class="code" href="namespace_f_i_x.html#a2948">file_unlink</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r5">m_sessionFileName</a>.c_str() );
00094   }
00095 
00096   <a class="code" href="class_f_i_x_1_1_file_store.html#d1">populateCache</a>();
00097   <a class="code" href="class_f_i_x_1_1_file_store.html#r6">m_msgFile</a> = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r2">m_msgFileName</a>.c_str(), <span class="stringliteral">"r+"</span> );
00098   <span class="keywordflow">if</span> ( !<a class="code" href="class_f_i_x_1_1_file_store.html#r6">m_msgFile</a> ) <a class="code" href="class_f_i_x_1_1_file_store.html#r6">m_msgFile</a> = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r2">m_msgFileName</a>.c_str(), <span class="stringliteral">"w+"</span> );
00099   <span class="keywordflow">if</span> ( !<a class="code" href="class_f_i_x_1_1_file_store.html#r6">m_msgFile</a> ) <span class="keywordflow">throw</span> ConfigError( <span class="stringliteral">"Could not open body file: "</span> + m_msgFileName );
00100 
00101   <a class="code" href="class_f_i_x_1_1_file_store.html#r7">m_headerFile</a> = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r3">m_headerFileName</a>.c_str(), <span class="stringliteral">"r+"</span> );
00102   <span class="keywordflow">if</span> ( !<a class="code" href="class_f_i_x_1_1_file_store.html#r7">m_headerFile</a> ) <a class="code" href="class_f_i_x_1_1_file_store.html#r7">m_headerFile</a> = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r3">m_headerFileName</a>.c_str(), <span class="stringliteral">"w+"</span> );
00103   <span class="keywordflow">if</span> ( !<a class="code" href="class_f_i_x_1_1_file_store.html#r7">m_headerFile</a> ) <span class="keywordflow">throw</span> ConfigError( <span class="stringliteral">"Could not open header file: "</span> + m_headerFileName );
00104 
00105   <a class="code" href="class_f_i_x_1_1_file_store.html#r8">m_seqNumsFile</a> = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r4">m_seqNumsFileName</a>.c_str(), <span class="stringliteral">"r+"</span> );
00106   <span class="keywordflow">if</span> ( !<a class="code" href="class_f_i_x_1_1_file_store.html#r8">m_seqNumsFile</a> ) <a class="code" href="class_f_i_x_1_1_file_store.html#r8">m_seqNumsFile</a> = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r4">m_seqNumsFileName</a>.c_str(), <span class="stringliteral">"w+"</span> );
00107   <span class="keywordflow">if</span> ( !<a class="code" href="class_f_i_x_1_1_file_store.html#r8">m_seqNumsFile</a> ) <span class="keywordflow">throw</span> ConfigError( <span class="stringliteral">"Could not open seqnums file: "</span> + m_seqNumsFileName );
00108 
00109   <span class="keywordtype">bool</span> setCreationTime = <span class="keyword">false</span>;
00110   <a class="code" href="class_f_i_x_1_1_file_store.html#r9">m_sessionFile</a> = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r5">m_sessionFileName</a>.c_str(), <span class="stringliteral">"r"</span> );
00111   <span class="keywordflow">if</span> ( !<a class="code" href="class_f_i_x_1_1_file_store.html#r9">m_sessionFile</a> ) setCreationTime = <span class="keyword">true</span>;
00112   <span class="keywordflow">else</span> fclose( m_sessionFile );
00113 
00114   <a class="code" href="class_f_i_x_1_1_file_store.html#r9">m_sessionFile</a> = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r5">m_sessionFileName</a>.c_str(), <span class="stringliteral">"r+"</span> );
00115   <span class="keywordflow">if</span> ( !<a class="code" href="class_f_i_x_1_1_file_store.html#r9">m_sessionFile</a> ) <a class="code" href="class_f_i_x_1_1_file_store.html#r9">m_sessionFile</a> = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r5">m_sessionFileName</a>.c_str(), <span class="stringliteral">"w+"</span> );
00116   <span class="keywordflow">if</span> ( !<a class="code" href="class_f_i_x_1_1_file_store.html#r9">m_sessionFile</a> ) <span class="keywordflow">throw</span> ConfigError( <span class="stringliteral">"Could not open session file"</span> );
00117   <span class="keywordflow">if</span> ( setCreationTime ) <a class="code" href="class_f_i_x_1_1_file_store.html#d4">setSession</a>();
00118 
00119   <a class="code" href="class_f_i_x_1_1_file_store.html#a6">setNextSenderMsgSeqNum</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#a4">getNextSenderMsgSeqNum</a>() );
00120   <a class="code" href="class_f_i_x_1_1_file_store.html#a7">setNextTargetMsgSeqNum</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#a5">getNextTargetMsgSeqNum</a>() );
00121 
00122   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00123 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="FIX::FileStore::populateCache" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::populateCache </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00125">125</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_utility_8cpp-source.html#l00542">FIX::file_fopen()</a>, <a class="el" href="_utility_8h-source.html#l00162">FILE_FSCANF</a>, <a class="el" href="_file_store_8h-source.html#l00114">m_cache</a>, <a class="el" href="_file_store_8h-source.html#l00118">m_headerFileName</a>, <a class="el" href="_file_store_8h-source.html#l00115">m_offsets</a>, <a class="el" href="_file_store_8h-source.html#l00119">m_seqNumsFileName</a>, <a class="el" href="_file_store_8h-source.html#l00120">m_sessionFileName</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_message_store_8h-source.html#l00117">FIX::MemoryStore::setCreationTime()</a>, <a class="el" href="_message_store_8h-source.html#l00108">FIX::MemoryStore::setNextSenderMsgSeqNum()</a>, and <a class="el" href="_message_store_8h-source.html#l00110">FIX::MemoryStore::setNextTargetMsgSeqNum()</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>.
<p>
<div class="fragment"><pre>00126 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::populateCache)
00127 
00128   std::string msg;
00129   Message message;
00130 
00131   FILE* headerFile;
00132   headerFile = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r3">m_headerFileName</a>.c_str(), <span class="stringliteral">"r+"</span> );
00133   <span class="keywordflow">if</span> ( headerFile )
00134   {
00135     <span class="keywordtype">int</span> num, offset, size;
00136     <span class="keywordflow">while</span> ( <a class="code" href="_utility_8h.html#a2">FILE_FSCANF</a>( headerFile, <span class="stringliteral">"%d,%d,%d "</span>, &amp;num, &amp;offset, &amp;size ) == 3 )
00137       <a class="code" href="class_f_i_x_1_1_file_store.html#r1">m_offsets</a>[ num ] = std::make_pair( offset, size );
00138     fclose( headerFile );
00139   }
00140 
00141   FILE* seqNumsFile;
00142   seqNumsFile = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r4">m_seqNumsFileName</a>.c_str(), <span class="stringliteral">"r+"</span> );
00143   <span class="keywordflow">if</span> ( seqNumsFile )
00144   {
00145     <span class="keywordtype">int</span> sender, target;
00146     <span class="keywordflow">if</span> ( <a class="code" href="_utility_8h.html#a2">FILE_FSCANF</a>( seqNumsFile, <span class="stringliteral">"%d : %d"</span>, &amp;sender, &amp;target ) == 2 )
00147     {
00148       <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.setNextSenderMsgSeqNum( sender );
00149       <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.setNextTargetMsgSeqNum( target );
00150     }
00151     fclose( seqNumsFile );
00152   }
00153 
00154   FILE* sessionFile;
00155   sessionFile = <a class="code" href="namespace_f_i_x.html#a2947">file_fopen</a>( <a class="code" href="class_f_i_x_1_1_file_store.html#r5">m_sessionFileName</a>.c_str(), <span class="stringliteral">"r+"</span> );
00156   <span class="keywordflow">if</span> ( sessionFile )
00157   {
00158     <span class="keywordtype">char</span> time[ 22 ];
00159 <span class="preprocessor">#ifdef HAVE_FSCANF_S</span>
00160 <span class="preprocessor"></span>    <span class="keywordtype">int</span> result = <a class="code" href="_utility_8h.html#a2">FILE_FSCANF</a>( sessionFile, <span class="stringliteral">"%s"</span>, time, 22 );
00161 <span class="preprocessor">#else</span>
00162 <span class="preprocessor"></span>    <span class="keywordtype">int</span> result = <a class="code" href="_utility_8h.html#a2">FILE_FSCANF</a>( sessionFile, <span class="stringliteral">"%s"</span>, time );
00163 <span class="preprocessor">#endif</span>
00164 <span class="preprocessor"></span>    <span class="keywordflow">if</span>( result == 1 )
00165     {
00166       <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.setCreationTime( UtcTimeStampConvertor::convert( time, <span class="keyword">true</span> ) );
00167     }
00168     fclose( sessionFile );
00169   }
00170 
00171   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00172 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="FIX::FileStore::readFromFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool FIX::FileStore::readFromFile </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="FIX::FileStore::refresh" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::refresh </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a11">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00294">294</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00295 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::refresh)
00296 
00297   <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.reset();
00298   <a class="code" href="class_f_i_x_1_1_file_store.html#d0">open</a>( <span class="keyword">false</span> );
00299 
00300   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00301 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="FIX::FileStore::reset" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::reset </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a10">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00284">284</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00285 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::reset)
00286 
00287   <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.reset();
00288   <a class="code" href="class_f_i_x_1_1_file_store.html#d0">open</a>( <span class="keyword">true</span> );
00289   <a class="code" href="class_f_i_x_1_1_file_store.html#d4">setSession</a>();
00290 
00291   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00292 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="FIX::FileStore::set" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool FIX::FileStore::set </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const std::string &amp;&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a1">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00193">193</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00195 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::set)
00196 
00197   <span class="keywordflow">if</span> ( fseek( m_msgFile, 0, SEEK_END ) ) 
00198     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Cannot seek to end of "</span> + m_msgFileName );
00199   <span class="keywordflow">if</span> ( fseek( m_headerFile, 0, SEEK_END ) ) 
00200     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Cannot seek to end of "</span> + m_headerFileName );
00201 
00202   <span class="keywordtype">int</span> offset = ftell( m_msgFile );
00203   <span class="keywordflow">if</span> ( offset &lt; 0 ) 
00204     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to get file pointer position from "</span> + m_msgFileName );
00205   <span class="keywordtype">int</span> size = msg.size();
00206 
00207   <span class="keywordflow">if</span> ( fprintf( m_headerFile, <span class="stringliteral">"%d,%d,%d "</span>, msgSeqNum, offset, size ) &lt; 0 )
00208     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to write to file "</span> + m_headerFileName );
00209   <a class="code" href="class_f_i_x_1_1_file_store.html#r1">m_offsets</a>[ msgSeqNum ] = std::make_pair( offset, size );
00210   fwrite( msg.c_str(), <span class="keyword">sizeof</span>( <span class="keywordtype">char</span> ), msg.size(), <a class="code" href="class_f_i_x_1_1_file_store.html#r6">m_msgFile</a> );
00211   <span class="keywordflow">if</span> ( ferror( m_msgFile ) ) 
00212     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to write to file "</span> + m_msgFileName );
00213   <span class="keywordflow">if</span> ( fflush( m_msgFile ) == EOF ) 
00214     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to flush file "</span> + m_msgFileName );
00215   <span class="keywordflow">if</span> ( fflush( m_headerFile ) == EOF ) 
00216     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to flush file "</span> + m_headerFileName );
00217   <span class="keywordflow">return</span> <span class="keyword">true</span>;
00218 
00219   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00220 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="FIX::FileStore::setNextSenderMsgSeqNum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::setNextSenderMsgSeqNum </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a5">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00250">250</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>.
<p>
<div class="fragment"><pre>00251 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::setNextSenderMsgSeqNum)
00252   <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.setNextSenderMsgSeqNum( value );
00253   <a class="code" href="class_f_i_x_1_1_file_store.html#d3">setSeqNum</a>();
00254   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00255 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="FIX::FileStore::setNextTargetMsgSeqNum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::setNextTargetMsgSeqNum </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_i_o_exception.html">IOException</a> )<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_message_store.html#a6">FIX::MessageStore</a>.
<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00257">257</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>.
<p>
<div class="fragment"><pre>00258 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::setNextTargetMsgSeqNum)
00259   <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.setNextTargetMsgSeqNum( value );
00260   <a class="code" href="class_f_i_x_1_1_file_store.html#d3">setSeqNum</a>();
00261   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00262 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="FIX::FileStore::setSeqNum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::setSeqNum </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00303">303</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_file_store_8cpp-source.html#l00238">getNextSenderMsgSeqNum()</a>, <a class="el" href="_file_store_8cpp-source.html#l00244">getNextTargetMsgSeqNum()</a>, <a class="el" href="_file_store_8h-source.html#l00124">m_seqNumsFile</a>, <a class="el" href="_file_store_8h-source.html#l00119">m_seqNumsFileName</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00304 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::setSeqNum)
00305 
00306   rewind( m_seqNumsFile );
00307   fprintf( m_seqNumsFile, <span class="stringliteral">"%10.10d : %10.10d"</span>,
00308            <a class="code" href="class_f_i_x_1_1_file_store.html#a4">getNextSenderMsgSeqNum</a>(), <a class="code" href="class_f_i_x_1_1_file_store.html#a5">getNextTargetMsgSeqNum</a>() );
00309   <span class="keywordflow">if</span> ( ferror( m_seqNumsFile ) ) 
00310     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to write to file "</span> + m_seqNumsFileName );
00311   <span class="keywordflow">if</span> ( fflush( m_seqNumsFile ) ) 
00312     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to flush file "</span> + m_seqNumsFileName );
00313 
00314   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00315 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="FIX::FileStore::setSession" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::FileStore::setSession </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8cpp-source.html#l00317">317</a> of file <a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a>.
<p>
References <a class="el" href="_message_store_8h-source.html#l00119">FIX::MemoryStore::getCreationTime()</a>, <a class="el" href="_file_store_8h-source.html#l00114">m_cache</a>, <a class="el" href="_file_store_8h-source.html#l00125">m_sessionFile</a>, <a class="el" href="_file_store_8h-source.html#l00120">m_sessionFileName</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>.
<p>
<div class="fragment"><pre>00318 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(FileStore::setSession)
00319 
00320   rewind( m_sessionFile );
00321   fprintf( m_sessionFile, <span class="stringliteral">"%s"</span>,
00322            UtcTimeStampConvertor::convert( <a class="code" href="class_f_i_x_1_1_file_store.html#r0">m_cache</a>.getCreationTime() ).c_str() );
00323   <span class="keywordflow">if</span> ( ferror( m_sessionFile ) ) 
00324     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to write to file "</span> + m_sessionFileName );
00325   <span class="keywordflow">if</span> ( fflush( m_sessionFile ) ) 
00326     <span class="keywordflow">throw</span> IOException( <span class="stringliteral">"Unable to flush file "</span> + m_sessionFileName );
00327 
00328   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00329 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r0" doxytag="FIX::FileStore::m_cache" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_f_i_x_1_1_memory_store.html">MemoryStore</a> <a class="el" href="class_f_i_x_1_1_file_store.html#r0">FIX::FileStore::m_cache</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00114">114</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00125">populateCache()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00317">setSession()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r7" doxytag="FIX::FileStore::m_headerFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FILE* <a class="el" href="class_f_i_x_1_1_file_store.html#r7">FIX::FileStore::m_headerFile</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00123">123</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00072">~FileStore()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="FIX::FileStore::m_headerFileName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> std::string <a class="el" href="class_f_i_x_1_1_file_store.html#r3">FIX::FileStore::m_headerFileName</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00118">118</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00035">FileStore()</a>, <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00125">populateCache()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r6" doxytag="FIX::FileStore::m_msgFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FILE* <a class="el" href="class_f_i_x_1_1_file_store.html#r6">FIX::FileStore::m_msgFile</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00122">122</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00072">~FileStore()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="FIX::FileStore::m_msgFileName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> std::string <a class="el" href="class_f_i_x_1_1_file_store.html#r2">FIX::FileStore::m_msgFileName</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00117">117</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00035">FileStore()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="FIX::FileStore::m_offsets" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_f_i_x_1_1_file_store.html#y1">NumToOffset</a> <a class="el" href="class_f_i_x_1_1_file_store.html#r1">FIX::FileStore::m_offsets</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00115">115</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00125">populateCache()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r8" doxytag="FIX::FileStore::m_seqNumsFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FILE* <a class="el" href="class_f_i_x_1_1_file_store.html#r8">FIX::FileStore::m_seqNumsFile</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00124">124</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>, <a class="el" href="_file_store_8cpp-source.html#l00303">setSeqNum()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00072">~FileStore()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="FIX::FileStore::m_seqNumsFileName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> std::string <a class="el" href="class_f_i_x_1_1_file_store.html#r4">FIX::FileStore::m_seqNumsFileName</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00119">119</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00035">FileStore()</a>, <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>, <a class="el" href="_file_store_8cpp-source.html#l00125">populateCache()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00303">setSeqNum()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r9" doxytag="FIX::FileStore::m_sessionFile" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FILE* <a class="el" href="class_f_i_x_1_1_file_store.html#r9">FIX::FileStore::m_sessionFile</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00125">125</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>, <a class="el" href="_file_store_8cpp-source.html#l00317">setSession()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00072">~FileStore()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r5" doxytag="FIX::FileStore::m_sessionFileName" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> std::string <a class="el" href="class_f_i_x_1_1_file_store.html#r5">FIX::FileStore::m_sessionFileName</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_file_store_8h-source.html#l00120">120</a> of file <a class="el" href="_file_store_8h-source.html">FileStore.h</a>.
<p>
Referenced by <a class="el" href="_file_store_8cpp-source.html#l00035">FileStore()</a>, <a class="el" href="_file_store_8cpp-source.html#l00080">open()</a>, <a class="el" href="_file_store_8cpp-source.html#l00125">populateCache()</a>, and <a class="el" href="_file_store_8cpp-source.html#l00317">setSession()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>/home/orenmnero/autobuild/quickfix/src/C++/<a class="el" href="_file_store_8h-source.html">FileStore.h</a><li>/home/orenmnero/autobuild/quickfix/src/C++/<a class="el" href="_file_store_8cpp-source.html">FileStore.cpp</a></ul>
<hr><address><small>
Generated on Thu Sep 14 08:52:50 2006 for QuickFIX by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.6-20040222 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
