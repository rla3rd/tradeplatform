<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FIX::ThreadedSocketAcceptor class Reference</title>
<link href="quickfix.css" rel="stylesheet" type="text/css">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td><img src="images/outsideTopLeft.gif"></td>
   <td width="100%" class="outsideTop">&nbsp;</td>
   <td><img src="images/outsideTopRight.gif"></td>
  </tr>
  <tr>
   <td class="outsideLeft">&nbsp;</td>
   <td>
	<img src="images/QuickFIX.jpg" align="middle" border=0>
	&nbsp;&nbsp;
	<a href="index.html">Index</a>&nbsp;
	<a href="files.html">Source Files</a>&nbsp;
	<a href="annotated.html">Annotated Class List</a>&nbsp;
	<a href="classes.html">Alphabetical Class List</a>&nbsp;
	<a href="hierarchy.html">Class Hierarchy</a>&nbsp;
	<a href="inherits.html">Graphical Class Hierarchy</a>&nbsp;
   </td>
   <td class="outsideRight">&nbsp;</td>
  </tr>
  <tr>
   <td><img src="images/outsideBottomLeft.gif"></td>
   <td width=100% class="outsideBottom">&nbsp;</td>
   <td><img src="images/outsideBottomRight.gif"></td>
  </tr>
</table>
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.3.6-20040222 -->
<h1>FIX::ThreadedSocketAcceptor Class Reference</h1>Threaded Socket implementation of <a class="el" href="class_f_i_x_1_1_acceptor.html">Acceptor</a>.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>&gt;</code>
<p>
Inheritance diagram for FIX::ThreadedSocketAcceptor:<p><center><img src="class_f_i_x_1_1_threaded_socket_acceptor__inherit__graph.png" border="0" usemap="#_f_i_x_1_1_threaded_socket_acceptor__inherit__map" alt="Inheritance graph"></center>
<map name="_f_i_x_1_1_threaded_socket_acceptor__inherit__map">
<area href="class_f_i_x_1_1_acceptor.html" shape="rect" coords="54,93,140,117" alt="">
<area href="class_f_i_x_1_1_log.html" shape="rect" coords="70,18,124,42" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for FIX::ThreadedSocketAcceptor:<p><center><img src="class_f_i_x_1_1_threaded_socket_acceptor__coll__graph.png" border="0" usemap="#_f_i_x_1_1_threaded_socket_acceptor__coll__map" alt="Collaboration graph"></center>
<map name="_f_i_x_1_1_threaded_socket_acceptor__coll__map">
<area href="class_f_i_x_1_1_acceptor.html" shape="rect" coords="193,200,278,224" alt="">
<area href="class_f_i_x_1_1_log.html" shape="rect" coords="20,109,73,133" alt="">
<area href="class_f_i_x_1_1_application.html" shape="rect" coords="109,109,208,133" alt="">
<area href="class_f_i_x_1_1_message_store_factory.html" shape="rect" coords="232,109,394,133" alt="">
<area href="class_f_i_x_1_1_log_factory.html" shape="rect" coords="441,109,540,133" alt="">
<area href="class_f_i_x_1_1_session_settings.html" shape="rect" coords="564,109,692,133" alt="">
<area href="class_f_i_x_1_1_dictionary.html" shape="rect" coords="582,19,673,43" alt="">
<area href="class_f_i_x_1_1_mutex.html" shape="rect" coords="302,200,372,224" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="class_f_i_x_1_1_threaded_socket_acceptor-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#a0">ThreadedSocketAcceptor</a> (<a class="el" href="class_f_i_x_1_1_application.html">Application</a> &amp;, <a class="el" href="class_f_i_x_1_1_message_store_factory.html">MessageStoreFactory</a> &amp;, const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;)  throw ( ConfigError )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#a1">ThreadedSocketAcceptor</a> (<a class="el" href="class_f_i_x_1_1_application.html">Application</a> &amp;, <a class="el" href="class_f_i_x_1_1_message_store_factory.html">MessageStoreFactory</a> &amp;, const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;, <a class="el" href="class_f_i_x_1_1_log_factory.html">LogFactory</a> &amp;)  throw ( ConfigError )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>virtual&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#a2">~ThreadedSocketAcceptor</a> ()</td></tr>

<tr><td colspan=2><br><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef std::set&lt; int &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y0">Sockets</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef std::set&lt; <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y1">Sessions</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef std::map&lt; int, <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y1">Sessions</a> &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y2">PortToSessions</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef std::map&lt; int, int &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y3">SocketToPort</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef std::map&lt; int, int &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y4">SocketToThread</a></td></tr>

<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#d0">readSettings</a> (const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#d1">onConfigure</a> (const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;)  throw ( ConfigError )</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implemented to configure acceptor.  <a href="#d1"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#d2">onInitialize</a> (const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;)  throw ( RuntimeError )</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implemented to initialize acceptor.  <a href="#d2"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#d3">onStart</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implemented to start listening for connections.  <a href="#d3"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#d4">onPoll</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implemented to connect and poll for events.  <a href="#d4"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#d5">onStop</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Implemented to stop a running acceptor.  <a href="#d5"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#d6">addThread</a> (int s, int t)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#d7">removeThread</a> (int s)</td></tr>

<tr><td colspan=2><br><h2>Static Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>THREAD_PROC&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#h0">socketAcceptorThread</a> (void *p)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>THREAD_PROC&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#h1">socketConnectionThread</a> (void *p)</td></tr>

<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y0">Sockets</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r0">m_sockets</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y2">PortToSessions</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r1">m_portToSessions</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y3">SocketToPort</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r2">m_socketToPort</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y4">SocketToThread</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r3">m_threads</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_f_i_x_1_1_mutex.html">Mutex</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r4">m_mutex</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Threaded Socket implementation of <a class="el" href="class_f_i_x_1_1_acceptor.html">Acceptor</a>. 
<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00036">36</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="y2" doxytag="FIX::ThreadedSocketAcceptor::PortToSessions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef std::map&lt; int, <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y1">Sessions</a> &gt; <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y2">FIX::ThreadedSocketAcceptor::PortToSessions</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00073">73</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="y1" doxytag="FIX::ThreadedSocketAcceptor::Sessions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef std::set&lt; <a class="el" href="class_f_i_x_1_1_session_i_d.html">SessionID</a> &gt; <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y1">FIX::ThreadedSocketAcceptor::Sessions</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Reimplemented from <a class="el" href="class_f_i_x_1_1_acceptor.html#y1">FIX::Acceptor</a>.
<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00072">72</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="y0" doxytag="FIX::ThreadedSocketAcceptor::Sockets" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef std::set&lt; int &gt; <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y0">FIX::ThreadedSocketAcceptor::Sockets</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00071">71</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="y3" doxytag="FIX::ThreadedSocketAcceptor::SocketToPort" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef std::map&lt; int, int &gt; <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y3">FIX::ThreadedSocketAcceptor::SocketToPort</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00074">74</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="y4" doxytag="FIX::ThreadedSocketAcceptor::SocketToThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef std::map&lt; int, int &gt; <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y4">FIX::ThreadedSocketAcceptor::SocketToThread</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00075">75</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.
<p>
Referenced by <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00145">onStop()</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="FIX::ThreadedSocketAcceptor::ThreadedSocketAcceptor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FIX::ThreadedSocketAcceptor::ThreadedSocketAcceptor </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_f_i_x_1_1_application.html">Application</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="class_f_i_x_1_1_message_store_factory.html">MessageStoreFactory</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throw ( <a class="el" href="struct_f_i_x_1_1_config_error.html">ConfigError</a> )</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00033">33</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_utility_8cpp-source.html#l00075">FIX::socket_init()</a>.
<p>
<div class="fragment"><pre>00037 : <a class="code" href="class_f_i_x_1_1_acceptor.html#a0">Acceptor</a>( application, factory, settings )
00038 { <a class="code" href="namespace_f_i_x.html#a2913">socket_init</a>(); }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="FIX::ThreadedSocketAcceptor::ThreadedSocketAcceptor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FIX::ThreadedSocketAcceptor::ThreadedSocketAcceptor </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="class_f_i_x_1_1_application.html">Application</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="class_f_i_x_1_1_message_store_factory.html">MessageStoreFactory</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="class_f_i_x_1_1_log_factory.html">LogFactory</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throw ( <a class="el" href="struct_f_i_x_1_1_config_error.html">ConfigError</a> )</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00040">40</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_utility_8cpp-source.html#l00075">FIX::socket_init()</a>.
<p>
<div class="fragment"><pre>00045 : <a class="code" href="class_f_i_x_1_1_acceptor.html#a0">Acceptor</a>( application, factory, settings, logFactory )
00046 { 
00047   <a class="code" href="namespace_f_i_x.html#a2913">socket_init</a>(); 
00048 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="FIX::ThreadedSocketAcceptor::~ThreadedSocketAcceptor" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FIX::ThreadedSocketAcceptor::~<a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html">ThreadedSocketAcceptor</a> </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00050">50</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_utility_8cpp-source.html#l00093">FIX::socket_term()</a>.
<p>
<div class="fragment"><pre>00051 { 
00052   <a class="code" href="namespace_f_i_x.html#a2914">socket_term</a>(); 
00053 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="d6" doxytag="FIX::ThreadedSocketAcceptor::addThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::ThreadedSocketAcceptor::addThread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>t</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00173">173</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00092">m_threads</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
Referenced by <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00120">onStart()</a>, and <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00197">socketAcceptorThread()</a>.
<p>
<div class="fragment"><pre>00174 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(ThreadedSocketAcceptor::addThread)
00175 
00176   Locker l(m_mutex);
00177 
00178   <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r3">m_threads</a>[ s ] = t;
00179 
00180   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00181 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="FIX::ThreadedSocketAcceptor::onConfigure" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::ThreadedSocketAcceptor::onConfigure </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_config_error.html">ConfigError</a> )<code> [private, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implemented to configure acceptor. 
<p>

<p>
Reimplemented from <a class="el" href="class_f_i_x_1_1_acceptor.html#d1">FIX::Acceptor</a>.
<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00055">55</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_dictionary_8cpp-source.html#l00087">FIX::Dictionary::getBool()</a>, <a class="el" href="_dictionary_8cpp-source.html#l00051">FIX::Dictionary::getLong()</a>, <a class="el" href="_dictionary_8cpp-source.html#l00183">FIX::Dictionary::has()</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_session_settings_8h-source.html#l00054">FIX::SOCKET_ACCEPT_PORT</a>, <a class="el" href="_session_settings_8h-source.html#l00058">FIX::SOCKET_NODELAY</a>, and <a class="el" href="_session_settings_8h-source.html#l00055">FIX::SOCKET_REUSE_ADDRESS</a>.
<p>
<div class="fragment"><pre>00057 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(ThreadedSocketAcceptor::onConfigure)
00058 
00059   std::set&lt;SessionID&gt; sessions = s.getSessions();
00060   std::set&lt;SessionID&gt;::iterator i;
00061   <span class="keywordflow">for</span>( i = sessions.begin(); i != sessions.end(); ++i )
00062   {
00063     <span class="keyword">const</span> Dictionary&amp; settings = s.get( *i );
00064     settings.getLong( SOCKET_ACCEPT_PORT );
00065     <span class="keywordflow">if</span>( settings.has(SOCKET_REUSE_ADDRESS) )
00066       settings.getBool( SOCKET_REUSE_ADDRESS );
00067     <span class="keywordflow">if</span>( settings.has(SOCKET_NODELAY) )
00068       settings.getBool( SOCKET_NODELAY );
00069   }
00070 
00071   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00072 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="FIX::ThreadedSocketAcceptor::onInitialize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::ThreadedSocketAcceptor::onInitialize </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_runtime_error.html">RuntimeError</a> )<code> [private, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implemented to initialize acceptor. 
<p>

<p>
Reimplemented from <a class="el" href="class_f_i_x_1_1_acceptor.html#d2">FIX::Acceptor</a>.
<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00074">74</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_dictionary_8cpp-source.html#l00051">FIX::Dictionary::getLong()</a>, <a class="el" href="_dictionary_8cpp-source.html#l00183">FIX::Dictionary::has()</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_session_settings_8h-source.html#l00054">FIX::SOCKET_ACCEPT_PORT</a>, <a class="el" href="_utility_8cpp-source.html#l00169">FIX::socket_close()</a>, <a class="el" href="_utility_8cpp-source.html#l00103">FIX::socket_createAcceptor()</a>, <a class="el" href="_session_settings_8h-source.html#l00058">FIX::SOCKET_NODELAY</a>, <a class="el" href="_session_settings_8h-source.html#l00055">FIX::SOCKET_REUSE_ADDRESS</a>, and <a class="el" href="_utility_8cpp-source.html#l00206">FIX::socket_setsockopt()</a>.
<p>
<div class="fragment"><pre>00076 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(ThreadedSocketAcceptor::onInitialize)
00077 
00078   <span class="keywordtype">short</span> port = 0;
00079   <span class="keywordtype">bool</span> reuseAddress = <span class="keyword">false</span>;
00080   <span class="keywordtype">bool</span> noDelay = <span class="keyword">false</span>;
00081 
00082   std::set&lt;int&gt; ports;
00083 
00084   std::set&lt;SessionID&gt; sessions = s.getSessions();
00085   std::set&lt;SessionID&gt;::iterator i = sessions.begin();
00086   <span class="keywordflow">for</span>( ; i != sessions.end(); ++i )
00087   {
00088     Dictionary settings = s.get( *i );
00089     port = (<span class="keywordtype">short</span>)settings.getLong( SOCKET_ACCEPT_PORT );
00090 
00091     <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r1">m_portToSessions</a>[port].insert( *i );
00092 
00093     <span class="keywordflow">if</span>( ports.find(port) != ports.end() )
00094       <span class="keywordflow">continue</span>;
00095     ports.insert( port );
00096 
00097     <span class="keywordflow">if</span>( settings.has( SOCKET_REUSE_ADDRESS ) )
00098       reuseAddress = s.get().getBool( SOCKET_REUSE_ADDRESS );
00099     <span class="keywordflow">if</span>( settings.has( SOCKET_NODELAY ) )
00100       noDelay = s.get().getBool( SOCKET_NODELAY );
00101 
00102     <span class="keywordtype">int</span> socket = <a class="code" href="namespace_f_i_x.html#a2915">socket_createAcceptor</a>( port, reuseAddress );
00103     <span class="keywordflow">if</span>( socket &lt; 0 )
00104     {
00105       SocketException e;
00106       <a class="code" href="namespace_f_i_x.html#a2920">socket_close</a>( socket );
00107       <span class="keywordflow">throw</span> RuntimeError( <span class="stringliteral">"Unable to create, bind, or listen to port "</span> 
00108                          + IntConvertor::convert( (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>)port ) + <span class="stringliteral">" ("</span> + e.what() + <span class="stringliteral">")"</span> );
00109     }
00110     <span class="keywordflow">if</span>( noDelay )
00111       <a class="code" href="namespace_f_i_x.html#a2923">socket_setsockopt</a>( socket, TCP_NODELAY );
00112 
00113     <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r2">m_socketToPort</a>[socket] = port;
00114     <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r0">m_sockets</a>.insert( socket );
00115   }    
00116 
00117   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00118 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="FIX::ThreadedSocketAcceptor::onPoll" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool FIX::ThreadedSocketAcceptor::onPoll </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implemented to connect and poll for events. 
<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_acceptor.html#d4">FIX::Acceptor</a>.
<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00137">137</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
<div class="fragment"><pre>00138 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(ThreadedSocketAcceptor::onPoll)
00139 
00140   <span class="keywordflow">return</span> <span class="keyword">false</span>;
00141 
00142   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00143 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="FIX::ThreadedSocketAcceptor::onStart" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::ThreadedSocketAcceptor::onStart </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implemented to start listening for connections. 
<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_acceptor.html#d3">FIX::Acceptor</a>.
<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00120">120</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00173">addThread()</a>, <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00091">m_socketToPort</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00197">socketAcceptorThread()</a>, and <a class="el" href="_utility_8cpp-source.html#l00445">FIX::thread_spawn()</a>.
<p>
<div class="fragment"><pre>00121 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(ThreadedSocketAcceptor::onStart)
00122 
00123   Sockets::iterator i;
00124   <span class="keywordflow">for</span>( i = <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r0">m_sockets</a>.begin(); i != <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r0">m_sockets</a>.end(); ++i )
00125   {
00126     Locker l( m_mutex );
00127     <span class="keywordtype">int</span> port = <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r2">m_socketToPort</a>[*i];
00128     AcceptorThreadInfo* info = <span class="keyword">new</span> AcceptorThreadInfo( <span class="keyword">this</span>, *i, port );
00129     <span class="keywordtype">unsigned</span> thread;
00130     <a class="code" href="namespace_f_i_x.html#a2939">thread_spawn</a>( &amp;socketAcceptorThread, info, thread );
00131     <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#d6">addThread</a>( *i, thread );
00132   }
00133 
00134   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00135 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d5" doxytag="FIX::ThreadedSocketAcceptor::onStop" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::ThreadedSocketAcceptor::onStop </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implemented to stop a running acceptor. 
<p>

<p>
Implements <a class="el" href="class_f_i_x_1_1_acceptor.html#d5">FIX::Acceptor</a>.
<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00145">145</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_acceptor_8cpp-source.html#l00229">FIX::Acceptor::isLoggedOn()</a>, <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00092">m_threads</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_utility_8cpp-source.html#l00169">FIX::socket_close()</a>, <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00075">SocketToThread</a>, and <a class="el" href="_utility_8cpp-source.html#l00465">FIX::thread_join()</a>.
<p>
<div class="fragment"><pre>00146 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(ThreadedSocketAcceptor::onStop)
00147 
00148   Locker l(m_mutex);
00149 
00150   time_t <a class="code" href="class_f_i_x_1_1_acceptor.html#a3">start</a> = 0;
00151   time_t now = 0;
00152 
00153   ::time( &amp;start );
00154   <span class="keywordflow">while</span> ( <a class="code" href="class_f_i_x_1_1_acceptor.html#a7">isLoggedOn</a>() )
00155   {
00156     <span class="keywordflow">if</span>( ::time(&amp;now) -5 &gt;= start )
00157       <span class="keywordflow">break</span>;
00158   }
00159 
00160   <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y4">SocketToThread</a> threads;
00161   threads = <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r3">m_threads</a>;
00162 
00163   SocketToThread::iterator i;
00164   <span class="keywordflow">for</span> ( i = threads.begin(); i != threads.end(); ++i )
00165     <a class="code" href="namespace_f_i_x.html#a2920">socket_close</a>( i-&gt;first );
00166   <span class="keywordflow">for</span> ( i = threads.begin(); i != threads.end(); ++i )
00167     <a class="code" href="namespace_f_i_x.html#a2941">thread_join</a>( i-&gt;second );
00168   threads.clear();
00169 
00170   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00171 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="FIX::ThreadedSocketAcceptor::readSettings" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool FIX::ThreadedSocketAcceptor::readSettings </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_f_i_x_1_1_session_settings.html">SessionSettings</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d7" doxytag="FIX::ThreadedSocketAcceptor::removeThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::ThreadedSocketAcceptor::removeThread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00183">183</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00092">m_threads</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, and <a class="el" href="_utility_8cpp-source.html#l00478">FIX::thread_detach()</a>.
<p>
Referenced by <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00197">socketAcceptorThread()</a>, and <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00249">socketConnectionThread()</a>.
<p>
<div class="fragment"><pre>00184 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(ThreadedSocketAcceptor::removeThread)
00185 
00186   Locker l(m_mutex);
00187   SocketToThread::iterator i = <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r3">m_threads</a>.find( s );
00188   <span class="keywordflow">if</span> ( i != <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r3">m_threads</a>.end() )
00189   {
00190     <a class="code" href="namespace_f_i_x.html#a2942">thread_detach</a>( i-&gt;second );
00191     <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r3">m_threads</a>.erase( i );
00192   }
00193 
00194   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00195 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="h0" doxytag="FIX::ThreadedSocketAcceptor::socketAcceptorThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> THREAD_PROC FIX::ThreadedSocketAcceptor::socketAcceptorThread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static, private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00197">197</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00173">addThread()</a>, <a class="el" href="_acceptor_8h-source.html#l00080">FIX::Acceptor::getApplication()</a>, <a class="el" href="_acceptor_8h-source.html#l00078">FIX::Acceptor::isStopped()</a>, <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00093">m_mutex</a>, <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00090">m_portToSessions</a>, <a class="el" href="_acceptor_8h-source.html#l00085">FIX::Acceptor::onEvent()</a>, <a class="el" href="_call_stack_8h-source.html#l00162">QF_STACK_CATCH</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_call_stack_8h-source.html#l00161">QF_STACK_TRY</a>, <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00183">removeThread()</a>, <a class="el" href="_utility_8cpp-source.html#l00154">FIX::socket_accept()</a>, <a class="el" href="_utility_8cpp-source.html#l00226">FIX::socket_getsockopt()</a>, <a class="el" href="_utility_8cpp-source.html#l00375">FIX::socket_peername()</a>, <a class="el" href="_utility_8cpp-source.html#l00206">FIX::socket_setsockopt()</a>, <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00249">socketConnectionThread()</a>, <a class="el" href="_utility_8h-source.html#l00136">THREAD_PROC</a>, and <a class="el" href="_utility_8cpp-source.html#l00445">FIX::thread_spawn()</a>.
<p>
Referenced by <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00120">onStart()</a>.
<p>
<div class="fragment"><pre>00198 { <a class="code" href="_call_stack_8h.html#a4">QF_STACK_TRY</a>
00199   <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(ThreadedSocketAcceptor::socketAcceptorThread)
00200 
00201   AcceptorThreadInfo * info = reinterpret_cast &lt; AcceptorThreadInfo* &gt; ( p );
00202 
00203   <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#a0">ThreadedSocketAcceptor</a>* pAcceptor = info-&gt;m_pAcceptor;
00204   <span class="keywordtype">int</span> s = info-&gt;m_socket;
00205   <span class="keywordtype">int</span> port = info-&gt;m_port;
00206   <span class="keyword">delete</span> info;
00207 
00208   <span class="keywordtype">int</span> noDelay = 0;
00209   <a class="code" href="namespace_f_i_x.html#a2924">socket_getsockopt</a>( s, TCP_NODELAY, noDelay );
00210 
00211   <span class="keywordtype">int</span> socket = 0;
00212   <span class="keywordflow">while</span> ( ( !pAcceptor-&gt;isStopped() &amp;&amp; ( socket = <a class="code" href="namespace_f_i_x.html#a2918">socket_accept</a>( s ) ) &gt;= 0 ) )
00213   {
00214     <span class="keywordflow">if</span>( noDelay )
00215       <a class="code" href="namespace_f_i_x.html#a2923">socket_setsockopt</a>( socket, TCP_NODELAY );
00216 
00217     <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y1">Sessions</a> sessions = pAcceptor-&gt;m_portToSessions[port];
00218 
00219     ThreadedSocketConnection * pConnection =
00220       <span class="keyword">new</span> ThreadedSocketConnection( socket, sessions, pAcceptor-&gt;getApplication(), *pAcceptor );
00221 
00222     ConnectionThreadInfo* info = <span class="keyword">new</span> ConnectionThreadInfo( pAcceptor, pConnection );
00223 
00224     {
00225       Locker l( pAcceptor-&gt;m_mutex );
00226 
00227       std::stringstream stream;
00228       stream &lt;&lt; <span class="stringliteral">"Accepted connection from "</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a2935">socket_peername</a>( socket ) &lt;&lt; <span class="stringliteral">" on port "</span> &lt;&lt; port;
00229       pAcceptor-&gt;onEvent( stream.str() );
00230 
00231       <span class="keywordtype">unsigned</span> thread;
00232       <span class="keywordflow">if</span> ( !<a class="code" href="namespace_f_i_x.html#a2939">thread_spawn</a>( &amp;socketConnectionThread, info, thread ) )
00233         <span class="keyword">delete</span> info;
00234       pAcceptor-&gt;addThread( socket, thread );
00235     }
00236   }
00237 
00238   <span class="keywordflow">if</span>( !pAcceptor-&gt;isStopped() )
00239     pAcceptor-&gt;removeThread( s );
00240 
00241   pAcceptor-&gt;onEvent( <span class="stringliteral">"ThreadedSocketInitiator stopped"</span> );
00242 
00243   <span class="keywordflow">return</span> 0;
00244 
00245   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00246   <a class="code" href="_call_stack_8h.html#a5">QF_STACK_CATCH</a>
00247 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="h1" doxytag="FIX::ThreadedSocketAcceptor::socketConnectionThread" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> THREAD_PROC FIX::ThreadedSocketAcceptor::socketConnectionThread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static, private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00249">249</a> of file <a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a>.
<p>
References <a class="el" href="_threaded_socket_connection_8h-source.html#l00054">FIX::ThreadedSocketConnection::getSocket()</a>, <a class="el" href="_acceptor_8h-source.html#l00078">FIX::Acceptor::isStopped()</a>, <a class="el" href="_call_stack_8h-source.html#l00162">QF_STACK_CATCH</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_call_stack_8h-source.html#l00161">QF_STACK_TRY</a>, <a class="el" href="_threaded_socket_connection_8cpp-source.html#l00080">FIX::ThreadedSocketConnection::read()</a>, <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00183">removeThread()</a>, and <a class="el" href="_utility_8h-source.html#l00136">THREAD_PROC</a>.
<p>
Referenced by <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00197">socketAcceptorThread()</a>.
<p>
<div class="fragment"><pre>00250 { <a class="code" href="_call_stack_8h.html#a4">QF_STACK_TRY</a>
00251   <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(ThreadedSocketAcceptor::socketConnectionThread)
00252 
00253   ConnectionThreadInfo * info = reinterpret_cast &lt; ConnectionThreadInfo* &gt; ( p );
00254 
00255   <a class="code" href="class_f_i_x_1_1_threaded_socket_acceptor.html#a0">ThreadedSocketAcceptor</a>* pAcceptor = info-&gt;m_pAcceptor;
00256   ThreadedSocketConnection* pConnection = info-&gt;m_pConnection;
00257   <span class="keyword">delete</span> info;
00258 
00259   <span class="keywordtype">int</span> socket = pConnection-&gt;getSocket();
00260 
00261   <span class="keywordflow">while</span> ( pConnection-&gt;read() ) {}
00262   <span class="keyword">delete</span> pConnection;
00263   <span class="keywordflow">if</span>( !pAcceptor-&gt;isStopped() )
00264     pAcceptor-&gt;removeThread( socket );
00265   <span class="keywordflow">return</span> 0;
00266 
00267   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00268   <a class="code" href="_call_stack_8h.html#a5">QF_STACK_CATCH</a>
00269 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r4" doxytag="FIX::ThreadedSocketAcceptor::m_mutex" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_f_i_x_1_1_mutex.html">Mutex</a> <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r4">FIX::ThreadedSocketAcceptor::m_mutex</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00093">93</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.
<p>
Referenced by <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00197">socketAcceptorThread()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="FIX::ThreadedSocketAcceptor::m_portToSessions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y2">PortToSessions</a> <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r1">FIX::ThreadedSocketAcceptor::m_portToSessions</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00090">90</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.
<p>
Referenced by <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00197">socketAcceptorThread()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="FIX::ThreadedSocketAcceptor::m_sockets" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y0">Sockets</a> <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r0">FIX::ThreadedSocketAcceptor::m_sockets</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00089">89</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="FIX::ThreadedSocketAcceptor::m_socketToPort" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y3">SocketToPort</a> <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r2">FIX::ThreadedSocketAcceptor::m_socketToPort</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00091">91</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.
<p>
Referenced by <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00120">onStart()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="FIX::ThreadedSocketAcceptor::m_threads" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#y4">SocketToThread</a> <a class="el" href="class_f_i_x_1_1_threaded_socket_acceptor.html#r3">FIX::ThreadedSocketAcceptor::m_threads</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_threaded_socket_acceptor_8h-source.html#l00092">92</a> of file <a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a>.
<p>
Referenced by <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00173">addThread()</a>, <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00145">onStop()</a>, and <a class="el" href="_threaded_socket_acceptor_8cpp-source.html#l00183">removeThread()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>/home/orenmnero/autobuild/quickfix/src/C++/<a class="el" href="_threaded_socket_acceptor_8h-source.html">ThreadedSocketAcceptor.h</a><li>/home/orenmnero/autobuild/quickfix/src/C++/<a class="el" href="_threaded_socket_acceptor_8cpp-source.html">ThreadedSocketAcceptor.cpp</a></ul>
<hr><address><small>
Generated on Thu Sep 14 08:53:01 2006 for QuickFIX by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.6-20040222 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
