<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FIX::HttpConnection class Reference</title>
<link href="quickfix.css" rel="stylesheet" type="text/css">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td><img src="images/outsideTopLeft.gif"></td>
   <td width="100%" class="outsideTop">&nbsp;</td>
   <td><img src="images/outsideTopRight.gif"></td>
  </tr>
  <tr>
   <td class="outsideLeft">&nbsp;</td>
   <td>
	<img src="images/QuickFIX.jpg" align="middle" border=0>
	&nbsp;&nbsp;
	<a href="index.html">Index</a>&nbsp;
	<a href="files.html">Source Files</a>&nbsp;
	<a href="annotated.html">Annotated Class List</a>&nbsp;
	<a href="classes.html">Alphabetical Class List</a>&nbsp;
	<a href="hierarchy.html">Class Hierarchy</a>&nbsp;
	<a href="inherits.html">Graphical Class Hierarchy</a>&nbsp;
   </td>
   <td class="outsideRight">&nbsp;</td>
  </tr>
  <tr>
   <td><img src="images/outsideBottomLeft.gif"></td>
   <td width=100% class="outsideBottom">&nbsp;</td>
   <td><img src="images/outsideBottomRight.gif"></td>
  </tr>
</table>
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.3.6-20040222 -->
<h1>FIX::HttpConnection Class Reference</h1>Encapsulates a HTTP socket file descriptor.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_http_connection_8h-source.html">HttpConnection.h</a>&gt;</code>
<p>
Collaboration diagram for FIX::HttpConnection:<p><center><img src="class_f_i_x_1_1_http_connection__coll__graph.png" border="0" usemap="#_f_i_x_1_1_http_connection__coll__map" alt="Collaboration graph"></center>
<map name="_f_i_x_1_1_http_connection__coll__map">
<area href="class_f_i_x_1_1_http_parser.html" shape="rect" coords="20,18,115,42" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="class_f_i_x_1_1_http_connection-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#a0">HttpConnection</a> (int s)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#a1">getSocket</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#a2">read</a> ()</td></tr>

<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#d0">readMessage</a> (std::string &amp;msg)  throw ( SocketRecvFailed )</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#d1">processStream</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#d2">processRequest</a> (const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#d3">processRoot</a> (const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;, std::stringstream &amp;header, std::stringstream &amp;body)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#d4">processSession</a> (const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;, std::stringstream &amp;header, std::stringstream &amp;body)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#d5">processResetSession</a> (const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;, std::stringstream &amp;header, std::stringstream &amp;body)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#d6">processRefreshSession</a> (const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;, std::stringstream &amp;header, std::stringstream &amp;body)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#d7">send</a> (const std::string &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#d8">disconnect</a> (int error=0)</td></tr>

<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#r0">m_socket</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#r1">m_buffer</a> [BUFSIZ]</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="class_f_i_x_1_1_http_parser.html">HttpParser</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#r2">m_parser</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>fd_set&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="class_f_i_x_1_1_http_connection.html#r3">m_fds</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Encapsulates a HTTP socket file descriptor. 
<p>

<p>
Definition at line <a class="el" href="_http_connection_8h-source.html#l00036">36</a> of file <a class="el" href="_http_connection_8h-source.html">HttpConnection.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="FIX::HttpConnection::HttpConnection" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FIX::HttpConnection::HttpConnection </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00034">34</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_http_connection_8h-source.html#l00059">m_fds</a>, and <a class="el" href="_http_connection_8h-source.html#l00055">m_socket</a>.
<p>
<div class="fragment"><pre>00035 : <a class="code" href="class_f_i_x_1_1_http_connection.html#r0">m_socket</a>( s )
00036 {
00037   FD_ZERO( &amp;m_fds );
00038   FD_SET( m_socket, &amp;m_fds );
00039 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="d8" doxytag="FIX::HttpConnection::disconnect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::HttpConnection::disconnect </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>error</em> = 0          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00047">47</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_http_connection_8h-source.html#l00055">m_socket</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_http_connection_8cpp-source.html#l00041">send()</a>, and <a class="el" href="_utility_8cpp-source.html#l00169">FIX::socket_close()</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00137">processRequest()</a>, <a class="el" href="_http_connection_8cpp-source.html#l00115">processStream()</a>, and <a class="el" href="_http_connection_8cpp-source.html#l00058">read()</a>.
<p>
<div class="fragment"><pre>00048 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::disconnect)
00049   
00050   <span class="keywordflow">if</span>( error &gt; 0 )
00051     <a class="code" href="class_f_i_x_1_1_http_connection.html#d7">send</a>( HttpMessage::createResponse(error) );
00052 
00053   <a class="code" href="namespace_f_i_x.html#a2920">socket_close</a>( m_socket );
00054 
00055   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00056 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="FIX::HttpConnection::getSocket" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int FIX::HttpConnection::getSocket </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8h-source.html#l00041">41</a> of file <a class="el" href="_http_connection_8h-source.html">HttpConnection.h</a>.
<p>
References <a class="el" href="_http_connection_8h-source.html#l00055">m_socket</a>.
<p>
<div class="fragment"><pre>00041 { <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_http_connection.html#r0">m_socket</a>; }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d6" doxytag="FIX::HttpConnection::processRefreshSession" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::HttpConnection::processRefreshSession </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::stringstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::stringstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>body</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00412">412</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_http_message_8h-source.html#l00097">FIX::HttpMessage::getParameter()</a>, <a class="el" href="_http_message_8h-source.html#l00076">FIX::HttpMessage::getParameterString()</a>, <a class="el" href="_http_message_8h-source.html#l00091">FIX::HttpMessage::hasParameter()</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_session_8h-source.html#l00068">FIX::Session::refresh()</a>, <a class="el" href="_http_message_8h-source.html#l00111">FIX::HttpMessage::removeParameter()</a>, and <a class="el" href="_http_message_8cpp-source.html#l00043">FIX::HttpMessage::toString()</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00137">processRequest()</a>.
<p>
<div class="fragment"><pre>00413 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::processRefreshSession)
00414 
00415   <span class="keywordflow">try</span>
00416   {
00417     HttpMessage copy = request;
00418     std::string beginString = request.getParameter( <span class="stringliteral">"BeginString"</span> );
00419     std::string senderCompID = request.getParameter( <span class="stringliteral">"SenderCompID"</span> );
00420     std::string targetCompID = request.getParameter( <span class="stringliteral">"TargetCompID"</span> );
00421     std::string sessionQualifier;
00422         <span class="keywordflow">if</span>( copy.hasParameter(<span class="stringliteral">"SessionQualifier"</span>) )
00423                 sessionQualifier = copy.getParameter( <span class="stringliteral">"SessionQualifier"</span> );
00424 
00425         SessionID sessionID( beginString, senderCompID, targetCompID, sessionQualifier );
00426     Session* pSession = Session::lookupSession( sessionID );
00427     <span class="keywordflow">if</span>( pSession == 0 ) <span class="keywordflow">throw</span> SessionNotFound();
00428 
00429     std::string sessionUrl = <span class="stringliteral">"/session"</span> + request.getParameterString();
00430 
00431     <span class="keywordtype">bool</span> confirm = <span class="keyword">false</span>;
00432     <span class="keywordflow">if</span>( copy.hasParameter(<span class="stringliteral">"confirm"</span>) &amp;&amp; IntConvertor::convert(copy.getParameter(<span class="stringliteral">"confirm"</span>)) )
00433     {
00434       confirm = <span class="keyword">true</span>;
00435       pSession-&gt;refresh();
00436       copy.removeParameter(<span class="stringliteral">"confirm"</span>);
00437     }
00438 
00439     <span class="keywordflow">if</span>( confirm )
00440     {
00441       header &lt;&lt; <span class="stringliteral">"&lt;META http-equiv='refresh' content=2;URL='"</span> &lt;&lt; <span class="stringliteral">"/session"</span> &lt;&lt; copy.getParameterString() &lt;&lt; <span class="stringliteral">"'&gt;"</span>;
00442       body &lt;&lt; <span class="stringliteral">"&lt;CENTER&gt;&lt;H2&gt;&lt;A href='"</span> &lt;&lt; <span class="stringliteral">"/session"</span> &lt;&lt; copy.getParameterString() &lt;&lt; <span class="stringliteral">"'&gt;"</span> 
00443            &lt;&lt; sessionID &lt;&lt; <span class="stringliteral">"&lt;/A&gt; has been refreshed&lt;/H2&gt;&lt;/CENTER&gt;"</span>;
00444     }
00445     <span class="keywordflow">else</span>
00446     {
00447       body &lt;&lt; <span class="stringliteral">"&lt;CENTER&gt;&lt;H2&gt;Are you sure you want to refresh session &lt;A href='"</span> &lt;&lt; sessionUrl 
00448            &lt;&lt; request.getParameterString() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; sessionID &lt;&lt; <span class="stringliteral">"&lt;/A&gt;?&lt;/H2&gt;&lt;/CENTER&gt;"</span>
00449            &lt;&lt; <span class="stringliteral">"&lt;CENTER&gt;[&lt;A HREF='"</span> &lt;&lt; request.toString() + <span class="stringliteral">"&amp;confirm=1'&gt;YES, refresh session&lt;/A&gt;]"</span>
00450            &lt;&lt; <span class="stringliteral">"&amp;nbsp;[&lt;A HREF='"</span> &lt;&lt; sessionUrl &lt;&lt; <span class="stringliteral">"'&gt;NO, do not refresh session&lt;/A&gt;]"</span>
00451            &lt;&lt; <span class="stringliteral">"&lt;/CENTER&gt;"</span>;
00452     }
00453   }
00454   <span class="keywordflow">catch</span>( std::exception&amp; e )
00455   {
00456     body &lt;&lt; e.what();
00457   }
00458 
00459   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00460 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="FIX::HttpConnection::processRequest" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::HttpConnection::processRequest </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00137">137</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_http_connection_8cpp-source.html#l00047">disconnect()</a>, <a class="el" href="_http_message_8h-source.html#l00073">FIX::HttpMessage::getRootString()</a>, <a class="el" href="_http_connection_8cpp-source.html#l00412">processRefreshSession()</a>, <a class="el" href="_http_connection_8cpp-source.html#l00361">processResetSession()</a>, <a class="el" href="_http_connection_8cpp-source.html#l00182">processRoot()</a>, <a class="el" href="_http_connection_8cpp-source.html#l00227">processSession()</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_http_connection_8cpp-source.html#l00041">send()</a>, and <a class="el" href="_http_message_8cpp-source.html#l00043">FIX::HttpMessage::toString()</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00115">processStream()</a>.
<p>
<div class="fragment"><pre>00138 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::processRequest)
00139 
00140   <span class="keywordtype">int</span> error = 200;
00141   std::stringstream header;
00142   std::stringstream body;
00143   std::string title = <span class="stringliteral">"QuickFIX Engine Web Interface"</span>;
00144 
00145   header &lt;&lt; <span class="stringliteral">"&lt;HEAD&gt;&lt;CENTER&gt;&lt;TITLE&gt;"</span> &lt;&lt; title &lt;&lt; <span class="stringliteral">"&lt;/TITLE&gt;&lt;H1&gt;"</span> &lt;&lt; title &lt;&lt; <span class="stringliteral">"&lt;/H1&gt;&lt;/CENTER&gt;"</span>
00146          &lt;&lt; <span class="stringliteral">"&lt;CENTER&gt;[&lt;A HREF='/'&gt;HOME&lt;/A&gt;]"</span>
00147          &lt;&lt; <span class="stringliteral">"&amp;nbsp;[&lt;A HREF='"</span> &lt;&lt; request.toString() &lt;&lt; <span class="stringliteral">"'&gt;REFRESH&lt;/A&gt;]"</span>
00148          &lt;&lt; <span class="stringliteral">"&lt;/CENTER&gt;&lt;HR/&gt;"</span>;
00149   body &lt;&lt; <span class="stringliteral">"&lt;BODY&gt;"</span>;
00150 
00151   <span class="keywordflow">try</span>
00152   {
00153     <span class="keywordflow">if</span>( request.getRootString() == <span class="stringliteral">"/"</span> )
00154       <a class="code" href="class_f_i_x_1_1_http_connection.html#d3">processRoot</a>( request, header, body );
00155     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( request.getRootString() == <span class="stringliteral">"/session"</span> )
00156       <a class="code" href="class_f_i_x_1_1_http_connection.html#d4">processSession</a>( request, header, body );
00157     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( request.getRootString() == <span class="stringliteral">"/resetSession"</span> )
00158       <a class="code" href="class_f_i_x_1_1_http_connection.html#d5">processResetSession</a>( request, header, body );
00159     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( request.getRootString() == <span class="stringliteral">"/refreshSession"</span> )
00160       <a class="code" href="class_f_i_x_1_1_http_connection.html#d6">processRefreshSession</a>( request, header, body );
00161     <span class="keywordflow">else</span>
00162       error = 404;
00163   }
00164   <span class="keywordflow">catch</span>( std::exception&amp; e )
00165   {
00166     error = 400;
00167     body &lt;&lt; e.what();
00168   }
00169 
00170   header &lt;&lt; <span class="stringliteral">"&lt;/HEADER&gt;"</span>;
00171   body &lt;&lt; <span class="stringliteral">"&lt;/BODY&gt;"</span>;
00172 
00173   std::string response = <span class="stringliteral">"&lt;HTML&gt;"</span> + header.str() + body.str() + <span class="stringliteral">"&lt;/HTML&gt;"</span>;
00174   <a class="code" href="class_f_i_x_1_1_http_connection.html#d7">send</a>( HttpMessage::createResponse(error, error == 200 ? response : <span class="stringliteral">""</span>) );
00175 
00176   <a class="code" href="class_f_i_x_1_1_http_connection.html#d8">disconnect</a>();
00177 
00178   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00179 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d5" doxytag="FIX::HttpConnection::processResetSession" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::HttpConnection::processResetSession </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::stringstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::stringstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>body</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00361">361</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_http_message_8h-source.html#l00097">FIX::HttpMessage::getParameter()</a>, <a class="el" href="_http_message_8h-source.html#l00076">FIX::HttpMessage::getParameterString()</a>, <a class="el" href="_http_message_8h-source.html#l00091">FIX::HttpMessage::hasParameter()</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_http_message_8h-source.html#l00111">FIX::HttpMessage::removeParameter()</a>, <a class="el" href="_session_8h-source.html#l00066">FIX::Session::reset()</a>, and <a class="el" href="_http_message_8cpp-source.html#l00043">FIX::HttpMessage::toString()</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00137">processRequest()</a>.
<p>
<div class="fragment"><pre>00362 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::processResetSession)
00363 
00364   <span class="keywordflow">try</span>
00365   {
00366     HttpMessage copy = request;
00367     std::string beginString = request.getParameter( <span class="stringliteral">"BeginString"</span> );
00368     std::string senderCompID = request.getParameter( <span class="stringliteral">"SenderCompID"</span> );
00369     std::string targetCompID = request.getParameter( <span class="stringliteral">"TargetCompID"</span> );
00370     std::string sessionQualifier;
00371         <span class="keywordflow">if</span>( copy.hasParameter(<span class="stringliteral">"SessionQualifier"</span>) )
00372                 sessionQualifier = copy.getParameter( <span class="stringliteral">"SessionQualifier"</span> );
00373 
00374         SessionID sessionID( beginString, senderCompID, targetCompID, sessionQualifier );
00375     Session* pSession = Session::lookupSession( sessionID );
00376     <span class="keywordflow">if</span>( pSession == 0 ) <span class="keywordflow">throw</span> SessionNotFound();
00377 
00378     std::string sessionUrl = <span class="stringliteral">"/session"</span> + request.getParameterString();
00379 
00380     <span class="keywordtype">bool</span> confirm = <span class="keyword">false</span>;
00381     <span class="keywordflow">if</span>( copy.hasParameter(<span class="stringliteral">"confirm"</span>) &amp;&amp; IntConvertor::convert(copy.getParameter(<span class="stringliteral">"confirm"</span>)) )
00382     {
00383       confirm = <span class="keyword">true</span>;
00384       pSession-&gt;reset();
00385       copy.removeParameter(<span class="stringliteral">"confirm"</span>);
00386     }
00387 
00388     <span class="keywordflow">if</span>( confirm )
00389     {
00390       header &lt;&lt; <span class="stringliteral">"&lt;META http-equiv='refresh' content=2;URL='"</span> &lt;&lt; <span class="stringliteral">"/session"</span> &lt;&lt; copy.getParameterString() &lt;&lt; <span class="stringliteral">"'&gt;"</span>;
00391       body &lt;&lt; <span class="stringliteral">"&lt;CENTER&gt;&lt;H2&gt;&lt;A href='"</span> &lt;&lt; <span class="stringliteral">"/session"</span> &lt;&lt; copy.getParameterString() &lt;&lt; <span class="stringliteral">"'&gt;"</span> 
00392            &lt;&lt; sessionID &lt;&lt; <span class="stringliteral">"&lt;/A&gt; has been reset&lt;/H2&gt;&lt;/CENTER&gt;"</span>;
00393     }
00394     <span class="keywordflow">else</span>
00395     {
00396       body &lt;&lt; <span class="stringliteral">"&lt;CENTER&gt;&lt;H2&gt;Are you sure you want to reset session &lt;A href='"</span> &lt;&lt; sessionUrl 
00397            &lt;&lt; request.getParameterString() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; sessionID &lt;&lt; <span class="stringliteral">"&lt;/A&gt;?&lt;/H2&gt;&lt;/CENTER&gt;"</span>
00398            &lt;&lt; <span class="stringliteral">"&lt;CENTER&gt;[&lt;A HREF='"</span> &lt;&lt; request.toString() + <span class="stringliteral">"&amp;confirm=1'&gt;YES, reset session&lt;/A&gt;]"</span>
00399            &lt;&lt; <span class="stringliteral">"&amp;nbsp;[&lt;A HREF='"</span> &lt;&lt; sessionUrl &lt;&lt; <span class="stringliteral">"'&gt;NO, do not reset session&lt;/A&gt;]"</span>
00400            &lt;&lt; <span class="stringliteral">"&lt;/CENTER&gt;"</span>;
00401     }
00402   }
00403   <span class="keywordflow">catch</span>( std::exception&amp; e )
00404   {
00405     body &lt;&lt; e.what();
00406   }
00407 
00408   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00409 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="FIX::HttpConnection::processRoot" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::HttpConnection::processRoot </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::stringstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::stringstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>body</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00182">182</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_session_8h-source.html#l00188">FIX::Session::getExpectedSenderNum()</a>, <a class="el" href="_session_8h-source.html#l00189">FIX::Session::getExpectedTargetNum()</a>, <a class="el" href="_session_8h-source.html#l00059">FIX::Session::isEnabled()</a>, <a class="el" href="_session_8h-source.html#l00110">FIX::Session::isInitiator()</a>, <a class="el" href="_session_8h-source.html#l00065">FIX::Session::isLoggedOn()</a>, <a class="el" href="_session_8h-source.html#l00108">FIX::Session::isSessionTime()</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00137">processRequest()</a>.
<p>
<div class="fragment"><pre>00183 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::processRoot)
00184 
00185   body &lt;&lt; <span class="stringliteral">"&lt;TABLE border='1' cellspacing='2' width='100%'&gt;"</span>
00186        &lt;&lt; <span class="stringliteral">"&lt;CAPTION&gt;&lt;EM&gt;"</span> &lt;&lt; Session::numSessions() &lt;&lt; <span class="stringliteral">" Sessions managed by QuickFIX&lt;/EM&gt;&lt;/CAPTION&gt;"</span>
00187        &lt;&lt; <span class="stringliteral">"&lt;TR&gt;"</span>
00188        &lt;&lt; <span class="stringliteral">"&lt;TD align='center'&gt;Session&lt;/TD&gt;"</span>
00189        &lt;&lt; <span class="stringliteral">"&lt;TD align='center'&gt;Type&lt;/TD&gt;"</span>
00190        &lt;&lt; <span class="stringliteral">"&lt;TD align='center'&gt;Enabled&lt;/TD&gt;"</span>
00191        &lt;&lt; <span class="stringliteral">"&lt;TD align='center'&gt;Session Time&lt;/TD&gt;"</span>
00192        &lt;&lt; <span class="stringliteral">"&lt;TD align='center'&gt;Logged On&lt;/TD&gt;"</span>
00193        &lt;&lt; <span class="stringliteral">"&lt;TD align='center'&gt;Next Incoming&lt;/TD&gt;"</span>
00194        &lt;&lt; <span class="stringliteral">"&lt;TD align='center'&gt;Next Outgoing&lt;/TD&gt;"</span>
00195        &lt;&lt; <span class="stringliteral">"&lt;/TR&gt;"</span>;
00196 
00197   std::set&lt;SessionID&gt; sessions = Session::getSessions();
00198   std::set&lt;SessionID&gt;::iterator i;
00199   <span class="keywordflow">for</span>( i = sessions.begin(); i != sessions.end(); ++i )
00200   {
00201     Session* pSession = Session::lookupSession( *i );
00202     <span class="keywordflow">if</span>( !pSession ) <span class="keywordflow">continue</span>;
00203 
00204     body &lt;&lt; <span class="stringliteral">"&lt;TR&gt;"</span>
00205          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href=/session?BeginString="</span> &lt;&lt; i-&gt;getBeginString()
00206                             &lt;&lt; <span class="stringliteral">"&amp;SenderCompID="</span> &lt;&lt; i-&gt;getSenderCompID()
00207                             &lt;&lt; <span class="stringliteral">"&amp;TargetCompID="</span> &lt;&lt; i-&gt;getTargetCompID();
00208     <span class="keywordflow">if</span>( i-&gt;getSessionQualifier().size() )
00209       body &lt;&lt; <span class="stringliteral">"&amp;SessionQualifier="</span> &lt;&lt; i-&gt;getSessionQualifier();
00210 
00211     body &lt;&lt; <span class="stringliteral">"&gt;"</span> &lt;&lt; *i &lt;&lt; <span class="stringliteral">"&lt;/A&gt;&lt;/TD&gt;"</span>
00212          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;isInitiator() ? <span class="stringliteral">"initiator"</span> : <span class="stringliteral">"acceptor"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00213          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;isEnabled() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00214          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;isSessionTime() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00215          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;isLoggedOn() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00216          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; pSession-&gt;getExpectedTargetNum() &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00217          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; pSession-&gt;getExpectedSenderNum() &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00218          &lt;&lt; <span class="stringliteral">"&lt;/TR&gt;"</span>;
00219   }
00220 
00221   body &lt;&lt; <span class="stringliteral">"&lt;/TABLE&gt;"</span>;
00222 
00223   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00224 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="FIX::HttpConnection::processSession" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::HttpConnection::processSession </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="class_f_i_x_1_1_http_message.html">HttpMessage</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::stringstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>std::stringstream &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>body</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00227">227</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_session_settings_8h-source.html#l00050">FIX::CHECK_COMPID</a>, <a class="el" href="_session_settings_8h-source.html#l00051">FIX::CHECK_LATENCY</a>, <a class="el" href="_session_8h-source.html#l00120">FIX::Session::getCheckCompId()</a>, <a class="el" href="_session_8h-source.html#l00125">FIX::Session::getCheckLatency()</a>, <a class="el" href="_session_8h-source.html#l00188">FIX::Session::getExpectedSenderNum()</a>, <a class="el" href="_session_8h-source.html#l00189">FIX::Session::getExpectedTargetNum()</a>, <a class="el" href="_session_8h-source.html#l00135">FIX::Session::getLogonTimeout()</a>, <a class="el" href="_session_8h-source.html#l00140">FIX::Session::getLogoutTimeout()</a>, <a class="el" href="_session_8h-source.html#l00130">FIX::Session::getMaxLatency()</a>, <a class="el" href="_session_8h-source.html#l00165">FIX::Session::getMillisecondsInTimeStamp()</a>, <a class="el" href="_http_message_8h-source.html#l00097">FIX::HttpMessage::getParameter()</a>, <a class="el" href="_http_message_8h-source.html#l00076">FIX::HttpMessage::getParameterString()</a>, <a class="el" href="_session_8h-source.html#l00170">FIX::Session::getPersistMessages()</a>, <a class="el" href="_session_8h-source.html#l00160">FIX::Session::getRefreshOnLogon()</a>, <a class="el" href="_session_8h-source.html#l00155">FIX::Session::getResetOnDisconnect()</a>, <a class="el" href="_session_8h-source.html#l00145">FIX::Session::getResetOnLogon()</a>, <a class="el" href="_session_8h-source.html#l00150">FIX::Session::getResetOnLogout()</a>, <a class="el" href="_session_8h-source.html#l00115">FIX::Session::getSendRedundantResendRequests()</a>, <a class="el" href="_http_message_8h-source.html#l00091">FIX::HttpMessage::hasParameter()</a>, <a class="el" href="_session_8h-source.html#l00059">FIX::Session::isEnabled()</a>, <a class="el" href="_session_8h-source.html#l00110">FIX::Session::isInitiator()</a>, <a class="el" href="_session_8h-source.html#l00065">FIX::Session::isLoggedOn()</a>, <a class="el" href="_session_8h-source.html#l00108">FIX::Session::isSessionTime()</a>, <a class="el" href="_session_8h-source.html#l00055">FIX::Session::logon()</a>, <a class="el" href="_session_settings_8h-source.html#l00063">FIX::LOGON_TIMEOUT</a>, <a class="el" href="_session_8h-source.html#l00057">FIX::Session::logout()</a>, <a class="el" href="_session_settings_8h-source.html#l00064">FIX::LOGOUT_TIMEOUT</a>, <a class="el" href="_session_settings_8h-source.html#l00052">FIX::MAX_LATENCY</a>, <a class="el" href="_session_settings_8h-source.html#l00104">FIX::MILLISECONDS_IN_TIMESTAMP</a>, <a class="el" href="_session_settings_8h-source.html#l00106">FIX::PERSIST_MESSAGES</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, <a class="el" href="_session_settings_8h-source.html#l00103">FIX::REFRESH_ON_LOGON</a>, <a class="el" href="_http_message_8h-source.html#l00111">FIX::HttpMessage::removeParameter()</a>, <a class="el" href="_session_settings_8h-source.html#l00102">FIX::RESET_ON_DISCONNECT</a>, <a class="el" href="_session_settings_8h-source.html#l00100">FIX::RESET_ON_LOGON</a>, <a class="el" href="_session_settings_8h-source.html#l00101">FIX::RESET_ON_LOGOUT</a>, <a class="el" href="_session_settings_8h-source.html#l00044">FIX::SEND_REDUNDANT_RESENDREQUESTS</a>, <a class="el" href="_session_8h-source.html#l00122">FIX::Session::setCheckCompId()</a>, <a class="el" href="_session_8h-source.html#l00127">FIX::Session::setCheckLatency()</a>, <a class="el" href="_session_8h-source.html#l00167">FIX::Session::setMillisecondsInTimeStamp()</a>, <a class="el" href="_session_8h-source.html#l00172">FIX::Session::setPersistMessages()</a>, <a class="el" href="_session_8h-source.html#l00162">FIX::Session::setRefreshOnLogon()</a>, <a class="el" href="_session_8h-source.html#l00157">FIX::Session::setResetOnDisconnect()</a>, <a class="el" href="_session_8h-source.html#l00147">FIX::Session::setResetOnLogon()</a>, <a class="el" href="_session_8h-source.html#l00152">FIX::Session::setResetOnLogout()</a>, <a class="el" href="_session_8h-source.html#l00117">FIX::Session::setSendRedundantResendRequests()</a>, and <a class="el" href="_http_message_8cpp-source.html#l00043">FIX::HttpMessage::toString()</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00137">processRequest()</a>.
<p>
<div class="fragment"><pre>00228 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::processSession)
00229 
00230   <span class="keywordflow">try</span>
00231   {
00232     HttpMessage copy = request;
00233     std::string url = request.toString();
00234     std::string beginString = copy.getParameter( <span class="stringliteral">"BeginString"</span> );
00235     std::string senderCompID = copy.getParameter( <span class="stringliteral">"SenderCompID"</span> );
00236     std::string targetCompID = copy.getParameter( <span class="stringliteral">"TargetCompID"</span> );
00237     std::string sessionQualifier;
00238         <span class="keywordflow">if</span>( copy.hasParameter(<span class="stringliteral">"SessionQualifier"</span>) )
00239                 sessionQualifier = copy.getParameter( <span class="stringliteral">"SessionQualifier"</span> );
00240 
00241     SessionID sessionID( beginString, senderCompID, targetCompID, sessionQualifier );
00242     Session* pSession = Session::lookupSession( sessionID );
00243     <span class="keywordflow">if</span>( pSession == 0 ) <span class="keywordflow">throw</span> SessionNotFound();
00244 
00245     <span class="keywordflow">if</span>( copy.hasParameter(<span class="stringliteral">"Enabled"</span>) )
00246     {
00247       IntConvertor::convert(copy.getParameter(<span class="stringliteral">"Enabled"</span>)) ? pSession-&gt;logon() : pSession-&gt;logout();
00248       copy.removeParameter(<span class="stringliteral">"Enabled"</span>);
00249     }
00250     <span class="keywordflow">if</span>( copy.hasParameter(SEND_REDUNDANT_RESENDREQUESTS) )
00251     {
00252       pSession-&gt;setSendRedundantResendRequests( IntConvertor::convert(copy.getParameter(SEND_REDUNDANT_RESENDREQUESTS)) != 0 );
00253       copy.removeParameter(SEND_REDUNDANT_RESENDREQUESTS);
00254     }
00255     <span class="keywordflow">if</span>( copy.hasParameter(CHECK_COMPID) )
00256     {
00257       pSession-&gt;setCheckCompId( IntConvertor::convert(copy.getParameter(CHECK_COMPID)) != 0 );
00258       copy.removeParameter(CHECK_COMPID);
00259     }
00260     <span class="keywordflow">if</span>( copy.hasParameter(CHECK_LATENCY) )
00261     {
00262       pSession-&gt;setCheckLatency( IntConvertor::convert(copy.getParameter(CHECK_LATENCY)) != 0 );
00263       copy.removeParameter(CHECK_LATENCY);
00264     }
00265     <span class="keywordflow">if</span>( copy.hasParameter(RESET_ON_LOGON) )
00266     {
00267       pSession-&gt;setResetOnLogon( IntConvertor::convert(copy.getParameter(RESET_ON_LOGON)) != 0 );
00268       copy.removeParameter(RESET_ON_LOGON);
00269     }
00270     <span class="keywordflow">if</span>( copy.hasParameter(RESET_ON_LOGOUT) )
00271     {
00272       pSession-&gt;setResetOnLogout( IntConvertor::convert(copy.getParameter(RESET_ON_LOGOUT)) != 0 );
00273       copy.removeParameter(RESET_ON_LOGOUT);
00274     }
00275     <span class="keywordflow">if</span>( copy.hasParameter(RESET_ON_DISCONNECT) )
00276     {
00277       pSession-&gt;setResetOnDisconnect( IntConvertor::convert(copy.getParameter(RESET_ON_DISCONNECT)) != 0 );
00278       copy.removeParameter(RESET_ON_DISCONNECT);
00279     }
00280     <span class="keywordflow">if</span>( copy.hasParameter(REFRESH_ON_LOGON) )
00281     {
00282       pSession-&gt;setRefreshOnLogon( IntConvertor::convert(copy.getParameter(REFRESH_ON_LOGON)) != 0 );
00283       copy.removeParameter(REFRESH_ON_LOGON);
00284     }
00285     <span class="keywordflow">if</span>( copy.hasParameter(MILLISECONDS_IN_TIMESTAMP) )
00286     {
00287       pSession-&gt;setMillisecondsInTimeStamp( IntConvertor::convert(copy.getParameter(MILLISECONDS_IN_TIMESTAMP)) != 0 );
00288       copy.removeParameter(MILLISECONDS_IN_TIMESTAMP);
00289     }
00290     <span class="keywordflow">if</span>( copy.hasParameter(PERSIST_MESSAGES) )
00291     {
00292       pSession-&gt;setPersistMessages( IntConvertor::convert(copy.getParameter(PERSIST_MESSAGES)) != 0 );
00293       copy.removeParameter(PERSIST_MESSAGES);
00294     }
00295 
00296     <span class="keywordflow">if</span>( url != copy.toString() )
00297       header &lt;&lt; <span class="stringliteral">"&lt;META http-equiv='refresh' content=0;URL='"</span> &lt;&lt; copy.toString() &lt;&lt; <span class="stringliteral">"'&gt;"</span>;
00298 
00299     body &lt;&lt; <span class="stringliteral">"&lt;TABLE border='1' cellspacing='2' width='100%'&gt;"</span>
00300          &lt;&lt; <span class="stringliteral">"&lt;CAPTION&gt;&lt;EM&gt;"</span> &lt;&lt; sessionID 
00301          &lt;&lt; <span class="stringliteral">"&amp;nbsp;(&lt;A href='/resetSession"</span> &lt;&lt; copy.getParameterString() &lt;&lt; <span class="stringliteral">"'&gt;RESET&lt;/A&gt;)"</span>
00302          &lt;&lt; <span class="stringliteral">"&amp;nbsp;(&lt;A href='/refreshSession"</span> &lt;&lt; copy.getParameterString() &lt;&lt; <span class="stringliteral">"'&gt;REFRESH&lt;/A&gt;)"</span>
00303          &lt;&lt; <span class="stringliteral">"&lt;/EM&gt;&lt;/CAPTION&gt;"</span>
00304          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;Enabled&lt;/TD&gt;&lt;TD&gt;"</span> 
00305          &lt;&lt; (pSession-&gt;isEnabled() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00306          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url + <span class="stringliteral">"&amp;Enabled="</span> &lt;&lt; !pSession-&gt;isEnabled() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span> 
00307          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;Type&lt;/TD&gt;&lt;TD&gt;"</span> 
00308          &lt;&lt; (pSession-&gt;isInitiator() ? <span class="stringliteral">"initiator"</span> : <span class="stringliteral">"acceptor"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;&lt;/TR&gt;"</span>
00309          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;Session Time&lt;/TD&gt;&lt;TD&gt;"</span> 
00310          &lt;&lt; (pSession-&gt;isSessionTime() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;&lt;/TR&gt;"</span>
00311          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;Logged On&lt;/TD&gt;&lt;TD&gt;"</span> 
00312          &lt;&lt; (pSession-&gt;isLoggedOn() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;&lt;/TR&gt;"</span>
00313          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;Next Incoming&lt;/TD&gt;&lt;TD&gt;"</span> 
00314          &lt;&lt; pSession-&gt;getExpectedTargetNum() &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;&lt;/TR&gt;"</span>
00315          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;Next Outgoing&lt;/TD&gt;&lt;TD&gt;"</span> 
00316          &lt;&lt; pSession-&gt;getExpectedSenderNum() &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;&lt;/TR&gt;"</span>
00317          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a164">SEND_REDUNDANT_RESENDREQUESTS</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00318          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;getSendRedundantResendRequests() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00319          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url &lt;&lt; <span class="stringliteral">"&amp;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a164">SEND_REDUNDANT_RESENDREQUESTS</a> &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; !pSession-&gt;getSendRedundantResendRequests() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span>
00320          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a170">CHECK_COMPID</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00321          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;getCheckCompId() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00322          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url &lt;&lt; <span class="stringliteral">"&amp;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a170">CHECK_COMPID</a> &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; !pSession-&gt;getCheckCompId() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span> 
00323          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a171">CHECK_LATENCY</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00324          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;getCheckLatency() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00325          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url &lt;&lt; <span class="stringliteral">"&amp;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a171">CHECK_LATENCY</a> &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; !pSession-&gt;getCheckLatency() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span>
00326          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a172">MAX_LATENCY</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00327          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; pSession-&gt;getMaxLatency() &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;&lt;/TR&gt;"</span>
00328          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a183">LOGON_TIMEOUT</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00329          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; pSession-&gt;getLogonTimeout() &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;&lt;/TR&gt;"</span>
00330          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a184">LOGOUT_TIMEOUT</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00331          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; pSession-&gt;getLogoutTimeout() &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;&lt;/TR&gt;"</span>
00332          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a220">RESET_ON_LOGON</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00333          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;getResetOnLogon() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00334          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url &lt;&lt; <span class="stringliteral">"&amp;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a220">RESET_ON_LOGON</a> &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; !pSession-&gt;getResetOnLogon() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span>
00335          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a221">RESET_ON_LOGOUT</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00336          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;getResetOnLogout() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00337          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url &lt;&lt; <span class="stringliteral">"&amp;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a221">RESET_ON_LOGOUT</a> &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; !pSession-&gt;getResetOnLogout() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span>
00338          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a222">RESET_ON_DISCONNECT</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00339          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;getResetOnDisconnect() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00340          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url &lt;&lt; <span class="stringliteral">"&amp;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a222">RESET_ON_DISCONNECT</a> &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; !pSession-&gt;getResetOnDisconnect() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span>
00341          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a223">REFRESH_ON_LOGON</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00342          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;getRefreshOnLogon() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00343          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url &lt;&lt; <span class="stringliteral">"&amp;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a223">REFRESH_ON_LOGON</a> &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; !pSession-&gt;getRefreshOnLogon() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span>
00344          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a224">MILLISECONDS_IN_TIMESTAMP</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00345          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;getMillisecondsInTimeStamp() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00346          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url &lt;&lt; <span class="stringliteral">"&amp;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a224">MILLISECONDS_IN_TIMESTAMP</a> &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; !pSession-&gt;getMillisecondsInTimeStamp() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span>
00347          &lt;&lt; <span class="stringliteral">"&lt;TR&gt;&lt;TD&gt;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a226">PERSIST_MESSAGES</a> &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00348          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;"</span> &lt;&lt; (pSession-&gt;getPersistMessages() ? <span class="stringliteral">"yes"</span> : <span class="stringliteral">"no"</span>) &lt;&lt; <span class="stringliteral">"&lt;/TD&gt;"</span>
00349          &lt;&lt; <span class="stringliteral">"&lt;TD&gt;&lt;A href='"</span> &lt;&lt; url &lt;&lt; <span class="stringliteral">"&amp;"</span> &lt;&lt; <a class="code" href="namespace_f_i_x.html#a226">PERSIST_MESSAGES</a> &lt;&lt; <span class="stringliteral">"="</span> &lt;&lt; !pSession-&gt;getPersistMessages() &lt;&lt; <span class="stringliteral">"'&gt;"</span> &lt;&lt; <span class="stringliteral">"[toggle]&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;"</span>
00350          &lt;&lt; <span class="stringliteral">"&lt;/TABLE&gt;"</span>;
00351   }
00352   <span class="keywordflow">catch</span>( std::exception&amp; e )
00353   {
00354     body &lt;&lt; e.what();
00355   }
00356 
00357   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00358 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="FIX::HttpConnection::processStream" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void FIX::HttpConnection::processStream </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00115">115</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_http_connection_8cpp-source.html#l00047">disconnect()</a>, <a class="el" href="_http_connection_8cpp-source.html#l00137">processRequest()</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, and <a class="el" href="_http_connection_8cpp-source.html#l00098">readMessage()</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00058">read()</a>.
<p>
<div class="fragment"><pre>00116 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::processStream)
00117 
00118   std::string msg;
00119   <span class="keywordflow">try</span>
00120   {
00121     <span class="keywordflow">if</span>( !<a class="code" href="class_f_i_x_1_1_http_connection.html#d0">readMessage</a>(msg) )
00122       <span class="keywordflow">return</span>;
00123     HttpMessage request( msg );
00124     <a class="code" href="class_f_i_x_1_1_http_connection.html#d2">processRequest</a>( request );
00125   }
00126   <span class="keywordflow">catch</span>( InvalidMessage&amp; ) 
00127   {
00128     <a class="code" href="class_f_i_x_1_1_http_connection.html#d8">disconnect</a>( 400 );
00129     <span class="keywordflow">return</span>;
00130   }
00131 
00132   <span class="keywordflow">return</span>;
00133 
00134   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00135 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="FIX::HttpConnection::read" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool FIX::HttpConnection::read </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00058">58</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_http_parser_8h-source.html#l00046">FIX::HttpParser::addToStream()</a>, <a class="el" href="_http_connection_8cpp-source.html#l00047">disconnect()</a>, <a class="el" href="_http_connection_8h-source.html#l00056">m_buffer</a>, <a class="el" href="_http_connection_8h-source.html#l00059">m_fds</a>, <a class="el" href="_http_connection_8h-source.html#l00058">m_parser</a>, <a class="el" href="_http_connection_8h-source.html#l00055">m_socket</a>, <a class="el" href="_http_connection_8cpp-source.html#l00115">processStream()</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
Referenced by <a class="el" href="_http_server_8cpp-source.html#l00153">FIX::HttpServer::onConnect()</a>.
<p>
<div class="fragment"><pre>00059 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::read)
00060 
00061   <span class="keyword">struct </span>timeval timeout = { 2, 0 };
00062   fd_set readset = <a class="code" href="class_f_i_x_1_1_http_connection.html#r3">m_fds</a>;
00063 
00064   <span class="keywordflow">try</span>
00065   {
00066     <span class="comment">// Wait for input (1 second timeout)</span>
00067     <span class="keywordtype">int</span> result = select( 1 + m_socket, &amp;readset, 0, 0, &amp;timeout );
00068 
00069     <span class="keywordflow">if</span>( result &gt; 0 ) <span class="comment">// Something to read</span>
00070     {
00071       <span class="comment">// We can read without blocking</span>
00072       <span class="keywordtype">int</span> size = recv( m_socket, m_buffer, <span class="keyword">sizeof</span>(m_buffer), 0 );
00073       <span class="keywordflow">if</span> ( size &lt;= 0 ) { <span class="keywordflow">throw</span> SocketRecvFailed( size ); }
00074       <a class="code" href="class_f_i_x_1_1_http_connection.html#r2">m_parser</a>.addToStream( m_buffer, size );
00075     }
00076     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( result == 0 ) <span class="comment">// Timeout</span>
00077     {
00078       <a class="code" href="class_f_i_x_1_1_http_connection.html#d8">disconnect</a>( 408 );
00079       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00080     }
00081     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( result &lt; 0 ) <span class="comment">// Error</span>
00082     {
00083       <span class="keywordflow">throw</span> SocketRecvFailed( result );
00084     }
00085 
00086     <a class="code" href="class_f_i_x_1_1_http_connection.html#d1">processStream</a>();
00087     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00088   }
00089   <span class="keywordflow">catch</span> ( SocketRecvFailed&amp; )
00090   {
00091     <a class="code" href="class_f_i_x_1_1_http_connection.html#d8">disconnect</a>();
00092     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00093   }
00094 
00095   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00096 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="FIX::HttpConnection::readMessage" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool FIX::HttpConnection::readMessage </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">std::string &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_socket_recv_failed.html">SocketRecvFailed</a> )<code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00098">98</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, and <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00115">processStream()</a>.
<p>
<div class="fragment"><pre>00100 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::readMessage)
00101 
00102   <span class="keywordflow">try</span>
00103   {
00104     <span class="keywordflow">return</span> <a class="code" href="class_f_i_x_1_1_http_connection.html#r2">m_parser</a>.readHttpMessage( msg );
00105   }
00106   <span class="keywordflow">catch</span> ( MessageParseError&amp; ) 
00107   { 
00108     <a class="code" href="class_f_i_x_1_1_http_connection.html#d8">disconnect</a>( 400 );
00109   }
00110   <span class="keywordflow">return</span> <span class="keyword">true</span>;
00111 
00112   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00113 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="d7" doxytag="FIX::HttpConnection::send" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool FIX::HttpConnection::send </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const std::string &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8cpp-source.html#l00041">41</a> of file <a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a>.
<p>
References <a class="el" href="_http_connection_8h-source.html#l00055">m_socket</a>, <a class="el" href="_call_stack_8h-source.html#l00158">QF_STACK_POP</a>, <a class="el" href="_call_stack_8h-source.html#l00157">QF_STACK_PUSH</a>, and <a class="el" href="_utility_8cpp-source.html#l00163">FIX::socket_send()</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00047">disconnect()</a>, and <a class="el" href="_http_connection_8cpp-source.html#l00137">processRequest()</a>.
<p>
<div class="fragment"><pre>00042 { <a class="code" href="_call_stack_8h.html#a0">QF_STACK_PUSH</a>(HttpConnection::send)
00043   <span class="keywordflow">return</span> <a class="code" href="namespace_f_i_x.html#a2919">socket_send</a>( m_socket, msg.c_str(), msg.length() ) &gt;= 0;
00044   <a class="code" href="_call_stack_8h.html#a1">QF_STACK_POP</a>
00045 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r1" doxytag="FIX::HttpConnection::m_buffer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char <a class="el" href="class_f_i_x_1_1_http_connection.html#r1">FIX::HttpConnection::m_buffer</a>[BUFSIZ]<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8h-source.html#l00056">56</a> of file <a class="el" href="_http_connection_8h-source.html">HttpConnection.h</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00058">read()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="FIX::HttpConnection::m_fds" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> fd_set <a class="el" href="class_f_i_x_1_1_http_connection.html#r3">FIX::HttpConnection::m_fds</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8h-source.html#l00059">59</a> of file <a class="el" href="_http_connection_8h-source.html">HttpConnection.h</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00034">HttpConnection()</a>, and <a class="el" href="_http_connection_8cpp-source.html#l00058">read()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="FIX::HttpConnection::m_parser" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="class_f_i_x_1_1_http_parser.html">HttpParser</a> <a class="el" href="class_f_i_x_1_1_http_connection.html#r2">FIX::HttpConnection::m_parser</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8h-source.html#l00058">58</a> of file <a class="el" href="_http_connection_8h-source.html">HttpConnection.h</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00058">read()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="FIX::HttpConnection::m_socket" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int <a class="el" href="class_f_i_x_1_1_http_connection.html#r0">FIX::HttpConnection::m_socket</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_http_connection_8h-source.html#l00055">55</a> of file <a class="el" href="_http_connection_8h-source.html">HttpConnection.h</a>.
<p>
Referenced by <a class="el" href="_http_connection_8cpp-source.html#l00047">disconnect()</a>, <a class="el" href="_http_connection_8h-source.html#l00041">getSocket()</a>, <a class="el" href="_http_connection_8cpp-source.html#l00034">HttpConnection()</a>, <a class="el" href="_http_connection_8cpp-source.html#l00058">read()</a>, and <a class="el" href="_http_connection_8cpp-source.html#l00041">send()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>/home/orenmnero/autobuild/quickfix/src/C++/<a class="el" href="_http_connection_8h-source.html">HttpConnection.h</a><li>/home/orenmnero/autobuild/quickfix/src/C++/<a class="el" href="_http_connection_8cpp-source.html">HttpConnection.cpp</a></ul>
<hr><address><small>
Generated on Thu Sep 14 08:52:51 2006 for QuickFIX by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.6-20040222 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
