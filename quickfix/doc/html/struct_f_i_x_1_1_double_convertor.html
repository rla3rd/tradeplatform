<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FIX::DoubleConvertor struct Reference</title>
<link href="quickfix.css" rel="stylesheet" type="text/css">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td><img src="images/outsideTopLeft.gif"></td>
   <td width="100%" class="outsideTop">&nbsp;</td>
   <td><img src="images/outsideTopRight.gif"></td>
  </tr>
  <tr>
   <td class="outsideLeft">&nbsp;</td>
   <td>
	<img src="images/QuickFIX.jpg" align="middle" border=0>
	&nbsp;&nbsp;
	<a href="index.html">Index</a>&nbsp;
	<a href="files.html">Source Files</a>&nbsp;
	<a href="annotated.html">Annotated Class List</a>&nbsp;
	<a href="classes.html">Alphabetical Class List</a>&nbsp;
	<a href="hierarchy.html">Class Hierarchy</a>&nbsp;
	<a href="inherits.html">Graphical Class Hierarchy</a>&nbsp;
   </td>
   <td class="outsideRight">&nbsp;</td>
  </tr>
  <tr>
   <td><img src="images/outsideBottomLeft.gif"></td>
   <td width=100% class="outsideBottom">&nbsp;</td>
   <td><img src="images/outsideBottomRight.gif"></td>
  </tr>
</table>
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.3.6-20040222 -->
<h1>FIX::DoubleConvertor Struct Reference</h1>Converts double to/from a string.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_field_convertors_8h-source.html">FieldConvertors.h</a>&gt;</code>
<p>
<a href="struct_f_i_x_1_1_double_convertor-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>std::string&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="struct_f_i_x_1_1_double_convertor.html#e0">convert</a> (double value, int padding=0)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="struct_f_i_x_1_1_double_convertor.html#e1">convert</a> (const std::string &amp;value, double &amp;result)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>double&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="struct_f_i_x_1_1_double_convertor.html#e2">convert</a> (const std::string &amp;value)  throw ( FieldConvertError )</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Converts double to/from a string. 
<p>

<p>
Definition at line <a class="el" href="_field_convertors_8h-source.html#l00201">201</a> of file <a class="el" href="_field_convertors_8h-source.html">FieldConvertors.h</a>.<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="e2" doxytag="FIX::DoubleConvertor::convert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> double FIX::DoubleConvertor::convert </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const std::string &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw ( <a class="el" href="struct_f_i_x_1_1_field_convert_error.html">FieldConvertError</a> )<code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_field_convertors_8h-source.html#l00293">293</a> of file <a class="el" href="_field_convertors_8h-source.html">FieldConvertors.h</a>.
<p>
References <a class="el" href="_field_convertors_8h-source.html#l00203">convert()</a>.
<p>
<div class="fragment"><pre>00295         {
00296                 <span class="keywordtype">double</span> result = 0.0;
00297                 <span class="keywordflow">if</span>( !<a class="code" href="struct_f_i_x_1_1_double_convertor.html#e0">convert</a>( value, result ) )
00298                         <span class="keywordflow">throw</span> FieldConvertError();
00299                 <span class="keywordflow">else</span>
00300                         <span class="keywordflow">return</span> result;
00301         }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="e1" doxytag="FIX::DoubleConvertor::convert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool FIX::DoubleConvertor::convert </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const std::string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>double &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>result</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_field_convertors_8h-source.html#l00265">265</a> of file <a class="el" href="_field_convertors_8h-source.html">FieldConvertors.h</a>.
<p>
<div class="fragment"><pre>00266         {
00267                 <span class="keyword">const</span> <span class="keywordtype">char</span> * i = value.c_str();
00268 
00269                 <span class="comment">// Catch null strings</span>
00270                 <span class="keywordflow">if</span>( !*i ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00271                 <span class="comment">// Eat leading '-' and recheck for null string</span>
00272                 <span class="keywordflow">if</span>( *i == <span class="charliteral">'-'</span> &amp;&amp; !*++i ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00273 
00274                 <span class="keywordtype">bool</span> haveDigit = <span class="keyword">false</span>;
00275 
00276                 <span class="keywordflow">if</span>( isdigit(*i) )
00277                 {
00278                         haveDigit = <span class="keyword">true</span>;
00279                         <span class="keywordflow">while</span>( isdigit (*++i) );
00280                 }
00281 
00282                 <span class="keywordflow">if</span>( *i == <span class="charliteral">'.'</span> &amp;&amp; isdigit(*++i) )
00283                 {
00284                         haveDigit = <span class="keyword">true</span>;
00285                         <span class="keywordflow">while</span>( isdigit (*++i) );
00286                 }
00287 
00288                 <span class="keywordflow">if</span>( *i || !haveDigit ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
00289                 result = strtod( value.c_str(), 0 );
00290                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00291         }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="FIX::DoubleConvertor::convert" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> std::string FIX::DoubleConvertor::convert </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">double&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>padding</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_field_convertors_8h-source.html#l00203">203</a> of file <a class="el" href="_field_convertors_8h-source.html">FieldConvertors.h</a>.
<p>
References <a class="el" href="_utility_8h-source.html#l00169">STRING_SPRINTF</a>.
<p>
Referenced by <a class="el" href="_field_convertors_8h-source.html#l00293">convert()</a>.
<p>
<div class="fragment"><pre>00204         {
00205                 <span class="keywordtype">char</span> result[32];
00206                 <span class="keywordtype">char</span> *end = 0;
00207 
00208                 <span class="keywordtype">int</span> size;
00209                 <span class="keywordflow">if</span>( value == 0 || value &gt; 0.0001 || value &lt;= -0.0001 )
00210                 {
00211                         size = <a class="code" href="_utility_8h.html#a3">STRING_SPRINTF</a>( result, <span class="stringliteral">"%.15g"</span>, value );
00212 
00213                         <span class="keywordflow">if</span>( padding &gt; 0 )
00214                         {
00215                                 <span class="keywordtype">char</span>* point = result;
00216                                 end = result + size - 1;
00217                                 <span class="keywordflow">while</span>( *point != <span class="charliteral">'.'</span> &amp;&amp; *point != 0 )
00218                                         point++;
00219 
00220                                 <span class="keywordflow">if</span>( *point == 0 )
00221                                 {
00222                                         end = point;
00223                                         *point = <span class="charliteral">'.'</span>;
00224                                         size++;
00225                                 }
00226                                 <span class="keywordtype">int</span> needed = padding - (<span class="keywordtype">int</span>)(end - point);
00227 
00228                                 <span class="keywordflow">while</span>( needed-- &gt; 0 )
00229                                 {
00230                                         *(++end) = <span class="charliteral">'0'</span>;
00231                                         size++;
00232                                 }
00233                                 *(end+1) = 0;
00234                         }
00235                 }
00236                 <span class="keywordflow">else</span>
00237                 {
00238                         size = <a class="code" href="_utility_8h.html#a3">STRING_SPRINTF</a>( result, <span class="stringliteral">"%.15f"</span>, value );
00239                         <span class="comment">// strip trailing 0's</span>
00240                         end = result + size - 1;
00241 
00242                         <span class="keywordflow">if</span>( padding &gt; 0 )
00243                         {
00244                                 <span class="keywordtype">int</span> discard = 15 - padding;
00245 
00246                                 <span class="keywordflow">while</span>( (*end == <span class="charliteral">'0'</span>) &amp;&amp; (discard-- &gt; 0) )
00247                                 {
00248                                         *(end--) = 0;
00249                                         size--;
00250                                 }
00251                         }
00252                         <span class="keywordflow">else</span>
00253                         {
00254                                 <span class="keywordflow">while</span>( *end == <span class="charliteral">'0'</span> )
00255                                 {
00256                                         *(end--) = 0;
00257                                         size--;
00258                                 }
00259                         }
00260                 }
00261 
00262                 <span class="keywordflow">return</span> std::string( result, size );
00263         }
</pre></div>    </td>
  </tr>
</table>
<hr>The documentation for this struct was generated from the following file:<ul>
<li>/home/orenmnero/autobuild/quickfix/src/C++/<a class="el" href="_field_convertors_8h-source.html">FieldConvertors.h</a></ul>
<hr><address><small>
Generated on Thu Sep 14 08:52:49 2006 for QuickFIX by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.6-20040222 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
